!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("raphael"));else if("function"==typeof define&&define.amd)define(["raphael"],e);else{var o="object"==typeof exports?e(require("raphael")):e(t.raphael);for(var r in o)("object"==typeof exports?exports:t)[r]=o[r]}}("undefined"!=typeof self?self:this,function(t){return function(t){function e(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,r){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,o){"use strict";var r=function(){function t(t,e){this.paper=t,this.fromLine=[],this.toLine=[],this.NodeType=null,e&&(this.opt=e),this._onInit()}return t.prototype.creator=function(t){this._whenCreatorEvt()},t.prototype._ps2Path=function(t,e){for(var o="",r=0;r<t.length;r++)o+=(o?"L":"M")+t[r].x+","+t[r].y;return e&&(o+="Z"),o},t.prototype._whenCreatorEvt=function(){},t.prototype._onInit=function(){},t.prototype.onDrag=function(){},t.prototype.recordLine=function(t,e){"from"==t?this.fromLine.push(e):"to"==t&&this.toLine.push(e)},t.prototype.syncLineMove=function(t){"function"!=typeof t&&(t=function(t,e){});for(var e=this.fromLine,o=this.toLine,r=0;r<e.length;r++){var n=e[r].c;n.attr("path");t(n,"from",e[r])}for(var i=0;i<o.length;i++){t(o[i].c,"to",o[i])}},t.prototype.toJson=function(){var t={NodeType:this.NodeType,opt:this.opt,c:{attr:this.c.attr()}};return this.label&&(t.label={attr:this.label.attr()}),t},t.prototype.getPLen=function(t,e){return Math.pow(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),.5)},t}();e.a=r},function(t,e,o){"use strict";var r=function(){function t(){this.fromLine=[],this.toLine=[],this.NodeType=null}return t.prototype.recordLine=function(t,e){"from"==t?this.fromLine.push(e):"to"==t&&this.toLine.push(e)},t.prototype.syncLineMove=function(t){"function"!=typeof t&&(t=function(t,e){});for(var e=this.fromLine,o=this.toLine,r=0;r<e.length;r++){var n=e[r].c;n.attr("path");t(n,"from",e[r])}for(var i=0;i<o.length;i++){t(o[i].c,"to",o[i])}},t.prototype.toJson=function(){var t={NodeType:this.NodeType,opt:this.opt,c:{attr:this.c.attr()}};return this.label&&(t.label={attr:this.label.attr()}),t},t}();e.a=r},function(t,e,o){"use strict";var r=o(1),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(e){var o=t.call(this)||this;return o.NodeType="judge",o.instance=e,o.opt={},o}return n(e,t),e.prototype.onlyCell=function(t,e,o,r){this.opt={cx:t,cy:e,w:o,h:r};var n=this.getAp(),i=this.getBp(),a=this.getCp(),s=this.getDp();return this.instance.path("M"+n.x+","+n.y+"L"+i.x+","+i.y+"L"+a.x+","+a.y+"L"+s.x+","+s.y+"Z")},e.prototype.create=function(t){this.opt=t,this.minWidth=t.w;var e=this.getAp(),o=this.getBp(),r=this.getCp(),n=this.getDp();this.c=this.instance.path("M"+e.x+","+e.y+"L"+o.x+","+o.y+"L"+r.x+","+r.y+"L"+n.x+","+n.y+"Z");var i;i=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=i,this.resizeByText()},e.prototype.resizeByText=function(){if(this.label){var t=this.label.getBBox(),e=Math.ceil(t.width),o=this.c.attr("w");if(e<this.minWidth&&o<this.minWidth)return;e<this.minWidth?e=this.minWidth:e+=25,this.opt.w=e,this.resizeByOpt()}},e.prototype.resizeByOpt=function(){var t=this.getAp(),e=this.getBp(),o=this.getCp(),r=this.getDp();this.c.attr("path",[["M",t.x,t.y],["L",e.x,e.y],["L",o.x,o.y],["L",r.x,r.y],["Z"]])},e.prototype.move=function(t,e){var o=this.getCpByAp(t,e),r=this.getBp(o.x,o.y),n=this.getCp(o.x,o.y),i=this.getDp(o.x,o.y);this.c.attr("path",[["M",t,e],["L",r.x,r.y],["L",n.x,n.y],["L",i.x,i.y],["Z"]]),this.opt.cx=o.x,this.opt.cy=o.y,this.label.attr(o)},e.prototype.ToSyncLine=function(t,e){var o=this,r=this.getCpByAp(t,e);this.syncLineMove(function(t,e,n){var i,a=n.position;if("from"==e){i="get"+a.from+"p";var s=o[i](r.x,r.y),p=t.attr("path");p[0]=["M",s.x,s.y],t.attr("path",p)}else if("to"==e){i="get"+a.to+"p";var c=o[i](r.x,r.y),h=t.attr("path");h[h.length-1]=["L",c.x,c.y],t.attr("path",h)}})},e.prototype.ToSyncArrow=function(t,e){var o=this,r=this.getCpByAp(t,e);this.syncLineMove(function(t,e,n){var i,a=n.position;if("from"==e){i="get"+a.from+"p";var s=o[i](r.x,r.y);n.updatePath([s.x,s.y])}else if("to"==e){i="get"+a.to+"p";var p=o[i](r.x,r.y);n.updatePath(null,[p.x,p.y])}})},e.prototype.getStlnP=function(t){var e=this["get"+(t=t||"D")+"p"]();this.isCoincidence(e,"from")&&(e=this.getCp(),t="C");return{x:e.x,y:e.y,position:t}},e.prototype.getEnlnP=function(t){var e=this["get"+(t=t||"B")+"p"]();return e.position=t,e},e.prototype.getCpByAp=function(t,e){return t+=this.opt.w/2,{x:t,y:e}},e.prototype.getAp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t-=o.w/2,{x:t,y:e}},e.prototype.getBp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,e-=o.h/2,{x:t,y:e}},e.prototype.getCp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t+=o.w/2,{x:t,y:e}},e.prototype.getDp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,e+=o.h/2,{x:t,y:e}},e.prototype.isCoincidence=function(t,e){var o=!1;if(t&&"object"==typeof t&&void 0!==t.x&&void 0!==t.y)if("from"==e){if(this.fromLine.length>0)for(var r=0;r<this.fromLine.length;r++){if((a=(i=this.fromLine[r].c.attr("path"))[0])[1]==t.x&&a[2]==t.y){o=!0;break}}}else if("to"==e&&this.toLine.length>0)for(var n=0;n<this.toLine.length;n++){var i,a;if((a=(i=this.toLine[n].c.attr("path"))[i.length-1])[1]==t.x&&a[2]==t.y){o=!0;break}}return o},e}(r.a);e.a=i},function(t,e,o){var r,n;r=[o(4),o(5)],void 0===(n=function(t,e){window.Raphael=t;return"function"==typeof e.default?e.default:e}.apply(e,r))||(t.exports=n)},function(e,o){e.exports=t},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(6),n=o(2),i=o(7),a=o(14),s=o(15),p=o(16),c=o(17),h=o(18),u=o(19),f=o(20),y=o(21),l=o(22),x=o(23),v=o(24),d=o(25),g={type:1,text:"开始"},_={type:2,text:"任务"},w={type:3,text:"判断"},b={type:9,text:"结束"},M={type:1801,text:"箭头"},P={type:1802,text:"文本框",size:10,selected:{"font-size":20,fill:"red"},defAtrr:{"font-size":10,fill:"black"}},L=function(){function t(t){if(this.config=t,this.raphael=r.a.createInstance(t),this._configMergeToDefule(),this._rIdx=0,this._code2EidDick={},this._LineDragingP=null,this.flow=new i.a(this.raphael),this.nodeQueues=[],this.lineQueues=[],this.textQueues=[],this.tempNodes=[],this.MagneticCore=null,this.config.noToolBar||this._toolbar(),this.config.stepCfg)try{this.loadStep(this.config.stepCfg)}catch(t){console.log(t)}}return t.prototype._configMergeToDefule=function(){var t=this.config.pkgClr||{};t.start=t.start||"rgb(181, 216, 126)",t.opera=t.opera||"rgb(224, 223, 226)",t.judge=t.judge||"rgb(49, 174, 196)",t.end=t.end||"rgb(34, 185, 41)",t.arrow=t.arrow||"rgb(3, 84, 41)",t.NodeBox=t.NodeBox||"rgb(15, 13, 105)",this.config.pkgClr=t,this.config.prefCode=this.config.prefCode||"A",this.config.listener=this.config.listener||{},this.config.noToolBar=this.config.noToolBar||!1},t.prototype._toolbar=function(){var t={},e=this.raphael,o=5,r=5,i=this.config.pkgClr;t.containerIst=e.rect(5,5,75,300),t.containerIst.attr("fill","#ffffff"),o+=20,r+=50,new s.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=20,new p.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=20,new c.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=20,new h.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=20,new u.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=20,new f.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=30,new y.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=20,new l.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=20,new x.a(e,{cx:o,cy:r,w:16,h:12}).creator(),r+=20,new v.a(e,{P1:{x:o-5,y:r},P2:{x:o+10,y:r}}).creator(),r+=20,new d.a(e,{P1:{x:o-5,y:r},P2:{x:o+10,y:r+4},h:4}).creator(),o+=20,r+=50,t.startIst=e.ellipse(o,r,8,6),t.startIst.attr("fill",i.start),t.startTxtIst=e.text(o+30,r,g.text),r+=20,t.operaIst=e.rect(o-8,r,16,12),t.operaIst.attr("fill",i.opera),t.operaTxtIst=e.text(o+30,r+4,_.text),r+=30,t.judgeIst=new n.a(e).onlyCell(o,r,16,12),t.judgeIst.attr("fill",i.judge),t.judgeTxtIst=e.text(o+30,r,w.text),r+=30,t.endIst=e.ellipse(o,r,8,6),t.endIst.attr("fill",i.end),t.endTxtIst=e.text(o+30,r,b.text),r+=30,t.arrowIst=this.flow.arrow([o-5,r],[o+10,r],3),t.arrowIst.c.attr("fill",i.arrow),t.arrowTxtIst=e.text(o+30,r,M.text),r+=30,t.textInst=this.raphael.text(o+10,r,P.text),this.$tool=t,this._toolbarDragEvt()},t.prototype._toolbarDragEvt=function(){var t=this,e=this.config.pkgClr,o=function(e,o){t.MagneticCore=null;var r={dx:0,dy:0};e.drag(function(e,o){e+=r.dx,o+=r.dy;var n=t.getLastElem();n&&n.move(e,o)},function(){var e,n;if(2==o)e=this.attr("x"),n=this.attr("y");else if(3==o){var i=this.attr("path")[0];e=i[1],n=i[2]}else e=this.attr("cx"),n=this.attr("cy");r.dx=e+5,r.dy=n+10,t._createNode(r,o)},function(){})};o(this.$tool.startIst,g.type),o(this.$tool.startTxtIst,g.type),o(this.$tool.operaIst,_.type),o(this.$tool.operaTxtIst,_.type),o(this.$tool.judgeIst,w.type),o(this.$tool.judgeTxtIst,w.type),o(this.$tool.endIst,b.type),o(this.$tool.endTxtIst,b.type);var r=function(o){var r={x:0,y:0},n=null;o.drag(function(t,e){t+=r.x,e+=r.y,n&&n.updatePath([t,e],[t+50,e])},function(){if("text"==o.type)r.x=o.attr("x"),r.y=o.attr("y");else{var i=o.attr("path");i=i[0],r.x=i[1],r.y=i[2]}(n=t.flow.arrow([r.x,r.y],[r.x+50,r.y],5)).c.attr("fill",e.arrow),t._lineTragEvent(n),t.lineQueues.push(n)},function(){})};r(this.$tool.arrowIst.c),r(this.$tool.arrowTxtIst),function(){var e={x:0,y:0},o=null;t.$tool.textInst.drag(function(t,r){t+=e.x,r+=e.y,o&&o.attr({x:t,y:r})},function(){e.x=this.attr("x")+5,e.y=this.attr("y")+5,o=t.raphael.text(e.x,e.y,"文本框"),t._textBindEvent(o),t.textQueues.push(o)},function(){})}()},t.prototype._getOrderCode=function(){this._rIdx+=1;var t=this.config.prefCode+this._rIdx;return this._code2EidDick[t]&&(t=this._getOrderCode()),t},t.prototype.removeBBox=function(){this.MagneticCore=null;for(var t=this.nodeQueues,e=0;e<t.length;e++){var o=t[e];o.bBox&&(o.bBox.remove(),o.bBox=null)}this.removeTempNodes();for(var r=this.lineQueues,n=0;n<r.length;n++){var i=r[n];r.selectEdMk&&(i.selectEdMk=!1)}this.removeIntersectMk(),this._removeTxtSelect(),this.tempNodes=[]},t.prototype.removeTempNodes=function(){for(var t=this.tempNodes,e=0;e<t.length;e++){t[e].remove()}},t.prototype.removeNode=function(t){if(t||(t=this.getSelected()),t){var e="object"==typeof t?t:this._code2EidDick[t]?this.raphael.getById(this._code2EidDick[t]):this.raphael.getById(t);if("object"==typeof e){var o=e.id,r=!1;if("arrow"==e.NodeType&&(r=!0),e.bBox&&(e.bBox.remove(),e.bBox=null),e.label&&(e.label.remove(),e.label=null),e.selectEdMk&&(e.selectEdMk=!1),e.c.remove(),e=null,r){for(var n=this.lineQueues,i=[],a=0;a<n.length;a++){var s=n[a];o!=s.c.id&&i.push(s)}this.lineQueues=i}else{for(var p=this.nodeQueues,c=[],h=0;h<p.length;h++){var u=p[h];o!=u.c.id&&c.push(u)}this.nodeQueues=c}return this.removeBBox(),!0}}return!1},t.prototype.removeIntersectMk=function(){for(var t=this.nodeQueues,e=null,o=0;o<t.length;o++){var r=t[o];if(r._IntersectMk){r._IntersectMk=!1;var n=r.NodeType,i=this.config.pkgClr;i[n]?r.c.attr("fill",i[n]):1==(n=r.c.data("type"))?r.c.attr("fill",i.start):9==n&&r.c.attr("fill",i.end),e=r}}return e},t.prototype.removeConLine=function(t,e){if(t&&e)for(var o=this.nodeQueues,r=t.c.id,n=0;n<o.length;n++){var i=o[n],a=e+"Line";if(i[a]&&i[a].length){for(var s=i[a],p=[],c=0;c<s.length;c++){var h=s[c];r!=h.c.id&&p.push(h)}i[a]=p}}return!1},t.prototype.removeAll=function(){return this.removeAllText(),this.removeAllLine(),this.removeAllNode(),this},t.prototype.removeAllNode=function(){this.removeBBox();for(var t=this.nodeQueues,e=0;e<t.length;e++){var o=t[e];o.label&&o.label.remove(),o.c.remove()}return this.nodeQueues=[],this},t.prototype.removeAllLine=function(){this.removeBBox();for(var t=this.lineQueues,e=0;e<t.length;e++){t[e].c.remove()}return this.lineQueues=[],this},t.prototype.removeAllText=function(){this.removeBBox();for(var t=this.textQueues,e=0;e<t.length;e++){t[e].remove()}return this.textQueues=[],this},t.prototype.getNodeByCode=function(t){for(var e=null,o=this.nodeQueues,r=0;r<o.length;r++){var n=o[r];if(n.c.data("code")==t){e=n;break}}return e},t.prototype.getNodeByEid=function(t){for(var e=null,o=this.nodeQueues,r=0;r<o.length;r++){var n=o[r];if(n.c.id==t){e=n;break}}return e},t.prototype.code2Id=function(t,e){if(t&&!e)return this._code2EidDick[t]||null;if(e&&!t){var o=this._code2EidDick;for(var r in o)if(e==o[r])return r;return null}return e&&t?(this._code2EidDick[t]=e,this):void 0},t.prototype.setOption=function(t,e){if(t){"object"!=typeof t&&(t={text:t}),e||(e=this.getSelected());var o="object"==typeof e?e:this.getNodeByCode(e);o&&t.text&&o.label&&(o.label.attr("text",t.text),o.opt=o.opt||{},o.opt.text=t.text,"function"==typeof o.resizeByText&&o.resizeByText())}return!1},t.prototype.cloneNode=function(t){if(t||(t=this.getSelected()),t){var e="object"==typeof t?t:this.raphael.getById(t);if("object"==typeof e){e.id;return e.c.clone(),e.label.clone(),!0}}return!1},t.prototype.getSelected=function(){for(var t=this.nodeQueues,e=null,o=0;o<t.length;o++){var r=t[o];if(r.bBox){e=r;break}}if(!e)for(var n=this.lineQueues,i=0;i<n.length;i++){var a=n[i];a.selectEdMk&&(e=a)}return e},t.prototype.getLastElem=function(){var t=null,e=this.nodeQueues;return e.length>0&&(t=e[e.length-1]),t},t.prototype.getFlowStep=function(){for(var t=[],e=this.nodeQueues,o=0;o<e.length;o++){var r=e[o],n=this.getFlowJson(r);t.push(n)}return t},t.prototype.getFlowJson=function(t){t||(t=this.getSelected());var e={};if(t){var o=t.label||null,r=t.c;e={name:o?o.attr("text"):"",code:r.data("code"),type:r.data("type"),_struct:t.toJson()};for(var n=t.toLine,i=[],a=0;a<n.length;a++){(h=this.getLineCntCode("from",n[a].c.id,t))&&i.push(h)}e.prev=i.length>0?i.join(","):"";for(var s=t.fromLine,p=[],c=0;c<s.length;c++){var h;(h=this.getLineCntCode("to",s[c].c.id,t))&&p.push(h)}e.next=p.length>0?p.join(","):""}else e=null;return e},t.prototype.getLineCntCode=function(t,e,o){if(t&&e){var r=this.nodeQueues,n=null;o&&(n="string"==typeof o?o:o.c.data("code"));for(var i=t+"Line",a=0;a<r.length;a++){var s=r[a],p=s.c.data("code");if(n!=p)for(var c=s[i],h=0;h<c.length;h++){if(e==c[h].c.id)return p}}}return null},t.prototype.getIntersectElem=function(t){var e=null;if("object"==typeof t)for(var o=this.nodeQueues,r=0;r<o.length;r++){var n=o[r],i=n.NodeType;if("endpnt"==i){var a=(h=n.c).attr("cx"),s=h.attr("cy"),p=h.attr("rx"),c=h.attr("ry");if(t.x>=a-p&&t.x<=a+p&&t.y>=s-c&&t.y<=s+c){e=n;break}}else if("opera"==i){var h,u=(h=n.c).attr("x"),f=h.attr("y"),y=h.attr("width"),l=h.attr("height");if(t.x>=u&&t.x<=u+y&&t.y>=f&&t.y<=f+l){e=n;break}}else if("judge"==i){var x=n.opt;a=x.cx,s=x.cy,l=x.h,y=x.w;if(t.x>=a-y/2&&t.x<=a+y/2&&t.y>=s-l/2&&t.y<=s+l/2){e=n;break}}}return e},t.prototype.loadStep=function(t){if("object"==typeof t){for(var e={},o=this.config.pkgClr,r=function(t,o){if(-1==t.indexOf(","))for(var r=-1==o.indexOf(",")?[o]:o.split(","),n=0;n<r.length;n++){var i=t+"__"+r[n];e[i]||(e[i]=!0)}else if(-1==o.indexOf(","))for(var a=-1==t.indexOf(",")?[t]:t.split(","),s=0;s<a.length;s++){i=a[s]+"__"+o;e[i]||(e[i]=!0)}},n=0;n<t.length;n++){var i=t[n],a=i._struct.opt,s=(o=this.config.pkgClr,i.type),p=null;if(1==s||9==s?(p=this.flow.endpoint(a.cx,a.cy,a.r,a.text),1==s?p.c.attr("fill",o.start):p.c.attr("fill",o.end)):2==s?(p=this.flow.operation(a.cx,a.cy,a.w,a.h,a.text)).c.attr("fill",o.opera):3==s&&(p=this.flow.judge(a.cx,a.cy,a.w,a.h,a.text)).c.attr("fill",o.judge),p){var c=i.code||p.c.data("code"),h=p.c.id;c||(c=this._getOrderCode()),p.c.data("code",c),this._code2EidDick[c]=h,p.c.data("type",s),this._bindEvent(p),this.nodeQueues.push(p);var u=i.prev||null;u&&r(u,c);var f=i.next||null;f&&r(c,f)}}for(var y in e){var l=y.split("__"),x=this.getNodeByCode(l[0]),v=this.getNodeByCode(l[1]),d=x.getStlnP(),g=v.getEnlnP(),_=this.flow.arrow([d.x,d.y],[g.x,g.y],5);_.position||(_.position={}),_.position.from=d.position,x.recordLine("from",_),v.recordLine("to",_),_.position.to=g.position,_.c.attr("fill",o.arrow),this._lineTragEvent(_),this.lineQueues.push(_)}}return this},t.prototype._createNode=function(t,e){var o=null,r=this.config.pkgClr;switch(e){case 1:(o=this.flow.endpoint(t.dx,t.dy,10,"开始")).c.attr("fill",r.start);break;case 2:(o=this.flow.operation(t.dx,t.dy,50,40,"操作流程")).c.attr("fill",r.opera);break;case 3:(o=this.flow.judge(t.dx,t.dy,50,40,"流程判断")).c.attr("fill",r.judge);break;case 9:(o=this.flow.endpoint(t.dx,t.dy,10,"结束")).c.attr("fill",r.end)}if(o){var n=this._getOrderCode();o.c.data("code",n),this._code2EidDick[n]=o.c.id,o.c.data("type",e),this._bindEvent(o),this.nodeQueues.push(o)}},t.prototype._bindEvent=function(t){if(t){var e=this,o=this.config.pkgClr;!function(){var e={x:0,y:0};t.c.drag(function(o,r){o+=e.x,r+=e.y,t.move(o,r),t.ToSyncArrow(o,r)},function(){var t,o;if("ellipse"==this.type)t=this.attr("cx"),o=this.attr("cy");else if("rect"==this.type)t=this.attr("x"),o=this.attr("y");else if("path"==this.type){var r=this.attr("path")[0];t=r[1],o=r[2]}e.x=t,e.y=o},function(){e={x:0,y:0}})}(),t.c.click(function(){e.removeBBox();var r=this.getBBox();t.bBox=t.instance.rect(r.x-5,r.y-5,r.width+10,r.height+10),t.bBox.attr({stroke:o.NodeBox}),e.onNodeClick(t)})}},t.prototype._lineTragEvent=function(t){if(!t||"object"!=typeof t)return!1;var e=this;return function(t){t.c.click(function(){e.removeBBox(),t.selectEdMk=!0;var o=t.opt,r=e.raphael.circle(o.p1[0],o.p1[1],3);r.attr("fill","#000000");var n=e.raphael.circle(o.p2[0],o.p2[1],3);n.attr("fill","#000000");var i=function(o,r){var n={ax:0,ay:0};o.drag(function(o,i){o+=n.ax,i+=n.ay;var a=e.getIntersectElem({x:o,y:i});if(a){e.removeIntersectMk(),a.c.attr("fill","#FF0000"),a._IntersectMk=!0;var s;o=(s=r?a.getEnlnP():a.getStlnP()).x,i=s.y;var p=r?"to":"from";e.removeConLine(t,p),a.recordLine(p,t),t.position||(t.position={}),t.position[p]=s.position}r?(t.updatePath(null,[o,i]),this.data("type","to")):(t.updatePath([o,i]),this.data("type","from")),e.MagneticCore=this,this.attr({cx:o,cy:i})},function(){n.ax=this.attr("cx"),n.ay=this.attr("cy")},function(){e.MagneticCore=null})};i(r),i(n,!0),e.tempNodes.push(r,n)})}(t),!0},t.prototype._textBindEvent=function(t){var e=this;!function(t){var e={x:0,y:0};t.drag(function(o,r){o+=e.x,r+=e.y,t.attr({x:o,y:r})},function(){e.x=t.attr("x"),e.y=t.attr("y")},function(){})}(t),t.click(function(){e.removeBBox(),this.attr(P.selected),this.data("selectMk",!0)})},t.prototype._removeTxtSelect=function(){for(var t=this.textQueues,e=0;e<t.length;e++){var o=t[e];o.data("selectMk")&&(o.attr(P.defAtrr),o.data("selectMk",!1))}},t.prototype.onNodeClick=function(t){},t.version=a.a,t}();e.default=L},function(t,e,o){"use strict";var r=0,n={},i=function(){function t(){}return t.createInstance=function(t){return(t="object"==typeof t?t:{}).dom,"string"==typeof t.dom&&(t.dom=$(t.dom)),t.w||(t.w=1.1*$(window).width()),t.h||(t.h=1.1*$(window).height()),Raphael(t.dom.get(0),t.w,t.h)},t.onMoveEvt=function(){},t.onStartEvt=function(){},t.onEndEvt=function(){},t.getIndex=function(){return r+=1},t.src=function(t,e,o){n[t]||(n[t]={});var r=n[t];return void 0===e?r:void 0===o?r[e]||null:void(r[e]=o)},t}();e.a=i},function(t,e,o){"use strict";o.d(e,"a",function(){return c});var r=o(8),n=o(9),i=o(2),a=o(10),s=o(12),p=o(13),c=function(){function t(t){this.paper=t}return t.prototype.endpoint=function(t,e,o,n){var i=new r.a(this.paper);return i.create({cx:t,cy:e,r:o,text:n}),i},t.prototype.judge=function(t,e,o,r,n){var a=new i.a(this.paper);return a.create({cx:t,cy:e,w:o,h:r,text:n}),a},t.prototype.operation=function(t,e,o,r,i){var a=new n.a(this.paper);return a.create({cx:t,cy:e,w:o,h:r,text:i}),a},t.prototype.line=function(t,e){var o=new a.a(this.paper);return o.create(t,e),o},t.prototype.rightAngleLine=function(t){var e=new a.a(this.paper);return e.RightAngle(t),e},t.prototype.arrow=function(t,e,o){var r=new s.a(this.paper);return r.create(t,e,o),r},t.prototype.bow=function(t){var e=new p.a(this.paper);return e.create(t),e},t.prototype.getEmptyNode=function(t){var e=null;switch(t){case"endpoint":e=new r.a(this.paper);break;case"judge":e=new i.a(this.paper);break;case"operation":e=new n.a(this.paper);break;case"line":e=new a.a(this.paper);break;case"arrow":e=new s.a(this.paper)}return e},t}()},function(t,e,o){"use strict";var r=o(1),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(e){var o=t.call(this)||this;return o.NodeType="endpnt",o.instance=e,o.opt={},o}return n(e,t),e.prototype.create=function(t){if("object"!=typeof t){var e=arguments;t={cx:e[0],cy:e[1],r:e[2]},e[3]&&(t.text=e[3])}t.h=t.h?t.h:t.r,this.minWidth=2*t.r,this.opt=t,this.c=this.instance.ellipse(t.cx,t.cy,t.r,t.h);var o;o=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=o,this.resizeByText()},e.prototype.resizeByText=function(){if(this.label){var t=this.label.getBBox(),e=Math.ceil(t.width),o=this.c.attr("rx");if(e<this.minWidth&&o<this.minWidth)return;e<this.minWidth?e=this.minWidth:e+=2,this.opt.r=e/2,this.resizeByOpt()}},e.prototype.resizeByOpt=function(){var t=this.opt;this.c.attr({cx:t.cx,cy:t.cy,rx:t.r,ry:t.h})},e.prototype.move=function(t,e){this.c.attr({cx:t,cy:e}),this.label.attr({x:t,y:e}),this.opt.cx=t,this.opt.cy=e},e.prototype.ToSyncLine=function(t,e){var o=this;this.syncLineMove(function(r,n,i){var a,s=i.position;if("from"==n){var p=r.attr("path");a="get"+s.from+"p";var c=o[a](t,e);p[0]=["M",c.x,c.y],r.attr("path",p)}else if("to"==n){var h=r.attr("path");a="get"+s.to+"p";var u=o[a](t,e);h[h.length-1]=["L",u.x,u.y],r.attr("path",h)}})},e.prototype.ToSyncArrow=function(t,e){var o=this;this.syncLineMove(function(r,n,i){var a,s=i.position;if("from"==n){a="get"+s.from+"p";var p=o[a](t,e);i.updatePath([p.x,p.y])}else if("to"==n){a="get"+s.to+"p";var c=o[a](t,e);i.updatePath(null,[c.x,c.y])}})},e.prototype.getStlnP=function(t){var e=this["get"+(t=t||"D")+"p"]();return e.position=t,e},e.prototype.getEnlnP=function(t){var e=this["get"+(t=t||"B")+"p"]();return e.position=t,e},e.prototype.getAp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t-=o.r,{x:t,y:e}},e.prototype.getBp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,e-=o.r,{x:t,y:e}},e.prototype.getCp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t+=o.r,{x:t,y:e}},e.prototype.getDp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,e+=o.r,{x:t,y:e}},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(1),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(e){var o=t.call(this)||this;return o.NodeType="opera",o.instance=e,o.opt={},o.bBox=null,o}return n(e,t),e.prototype.create=function(t){this.opt=t,this.minWidth=t.w;var e=this.getAp();this.c=this.instance.rect(e.x,e.y,t.w,t.h);var o;o=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=o,this.resizeByText()},e.prototype.resizeByText=function(){if(this.label){var t=this.label.getBBox(),e=Math.ceil(t.width),o=this.c.attr("w");if(e<this.minWidth&&o<this.minWidth)return;e<this.minWidth?e=this.minWidth:e+=10,this.opt.w=e;var r=this.getAp();this.c.attr({width:e,x:r.x,y:r.y})}},e.prototype.move=function(t,e){var o=this.getCtpByAp(t,e);this.c.attr({x:t,y:e}),this.label.attr(o),this.opt.cx=t,this.opt.cy=e},e.prototype.ToSyncLine=function(t,e){var o=this,r=this.getCtpByAp(t,e);this.syncLineMove(function(t,e,n){var i,a=n.position;if("from"==e){var s=t.attr("path");i="get"+a.from+"p";var p=o[i](r.x,r.y);s[0]=["M",p.x,p.y],t.attr("path",s)}else if("to"==e){i="get"+a.to+"p";var c=o[i](r.x,r.y),h=t.attr("path");h[h.length-1]=["L",c.x,c.y],t.attr("path",h)}})},e.prototype.ToSyncArrow=function(t,e){var o=this,r=this.getCtpByAp(t,e);this.syncLineMove(function(t,e,n){var i,a=n.position;if("from"==e){i="get"+a.from+"p";var s=o[i](r.x,r.y);n.updatePath([s.x,s.y])}else if("to"==e){i="get"+a.to+"p";var p=o[i](r.x,r.y);n.updatePath(null,[p.x,p.y])}})},e.prototype.getStlnP=function(t){var e=this["get"+(t=t||"Bt")+"p"]();return e.position=t,e},e.prototype.getEnlnP=function(t){var e=this["get"+(t=t||"T")+"p"]();return e.position=t,e},e.prototype.getCtpByAp=function(t,e){var o=this.opt;return t+=o.w/2,e+=o.h/2,{x:t,y:e}},e.prototype.getAp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t-=o.w/2,e-=o.h/2,{x:t,y:e}},e.prototype.getBp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t-=o.w/2,e+=o.h/2,{x:t,y:e}},e.prototype.getCp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t+=o.w/2,e+=o.h/2,{x:t,y:e}},e.prototype.getDp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t-=o.w/2,e+=o.h/2,{x:t,y:e}},e.prototype.getTp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,e-=o.h/2,{x:t,y:e}},e.prototype.getRp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t+=o.w/2,{x:t,y:e}},e.prototype.getBtp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,e+=o.h/2,{x:t,y:e}},e.prototype.getLp=function(t,e){var o=this.opt;return t=t||o.cx,e=e||o.cy,t-=o.w/2,{x:t,y:e}},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(11),n=function(){function t(t){this.NodeType="line",this.instance=t,this.opt={},this.position={},this.rightAngle=!1}return t.prototype.create=function(t,e){this.opt={p1:t,p2:e},this.c=this.instance.path("M"+t[0]+","+t[1]+"L"+e[0]+","+e[1])},t.prototype.RightAngle=function(t){this.opt=t,this.rightAngle=!0;var e=t.p1,o=t.p2,r=20;t.d&&(r=t.d);var n="";if(e.x!=o.x&&e.y!=o.y){var i=o.x-e.x;n="L"+(e.x+i+r*(i>0?1:-1))+","+e.y+"L"+(e.x+i+r*(i>0?1:-1))+","+o.y}this.c=this.instance.path("M"+e.x+","+e.y+n+"L"+o.x+","+o.y)},t.prototype.createByPoint=function(t){this.opt=t;var e="";r.a.each(this.opt.points,function(t,o){o&&(e+=(e?"L":"M")+o.x+","+o.y)}),this.c=this.instance.path(e)},t}();e.a=n},function(t,e,o){"use strict";o.d(e,"a",function(){return r});var r=function(){function t(){}return t.clone=function(t){t="object"==typeof t?t:{};return $.extend(!0,{},t)},t.ArrayMergeSameValue=function(t){if("object"==typeof t&&t.length&&t.length>1){for(var e={},o=[],r=0;r<t.length;r++)e[t[r]]||(o.push(t[r]),e[t[r]]=!0);t=o}return t},t.each=function(t,e){if("object"==typeof t)if($.isArray(t))for(var o=0;o<t.length&&!1!==e(o,t[o]);o++);else for(var r in t)if(!1===e(r,t[r]))break},t}()},function(t,e,o){"use strict";var r=function(){function t(t){this.NodeType="arrow",this.instance=t,this.opt={},this.position={}}return t.prototype.create=function(t,e,o){this.opt={p1:t,p2:e,r:o};var r=this.getPoints();this.c=this.instance.path("M"+t[0]+","+t[1]+"L"+e[0]+","+e[1]+"L"+r.cP.x+","+r.cP.y+"L"+r.dP.x+","+r.dP.y+"L"+e[0]+","+e[1])},t.prototype.getPoints=function(t,e,o){var r=this.opt;t||(t=r.p1),e||(e=r.p2),o||(o=r.r);var n=Math.atan2(t[1]-e[1],e[0]-t[0])*(180/Math.PI),i=e[0]-o*Math.cos(n*(Math.PI/180)),a=e[1]+o*Math.sin(n*(Math.PI/180));return{cP:{x:i+o*Math.cos((n+120)*(Math.PI/180)),y:a-o*Math.sin((n+120)*(Math.PI/180))},dP:{x:i+o*Math.cos((n+240)*(Math.PI/180)),y:a-o*Math.sin((n+240)*(Math.PI/180))}}},t.prototype.updatePath=function(t,e,o){var r=this.opt;t||(t=r.p1),e||(e=r.p2),o||(o=r.r);var n=this.getPoints(t,e,o);this.c.attr("path",[["M",t[0],t[1]],["L",e[0],e[1]],["L",n.cP.x,n.cP.y],["L",n.dP.x,n.dP.y],["L",e[0],e[1]]]),this.opt={p1:t,p2:e,r:o}},t}();e.a=r},function(t,e,o){"use strict";var r=function(){function t(t){this.NodeType="bow",this.instance=t,this.opt={},this.position={}}return t.prototype.create=function(t){this.opt=t,this.queueCheck(),this.bodySharp(),this.arrowSharp()},t.prototype.arrowSharp=function(){var t=this.opt,e=t.queue,o=t.r?t.r:5,r=e.length,n=e[r-1],i=e[r-2],a=Math.atan2(i.y-n.y,n.x-i.x)*(180/Math.PI),s=n.x-o*Math.cos(a*(Math.PI/180)),p=n.y+o*Math.sin(a*(Math.PI/180)),c=s+o*Math.cos((a+120)*(Math.PI/180)),h=p-o*Math.sin((a+120)*(Math.PI/180)),u=s+o*Math.cos((a+240)*(Math.PI/180)),f=p-o*Math.sin((a+240)*(Math.PI/180));this.arrow?this.arrow.attr("path",[["M",n.x,n.y],["L",c,h],["L",u,f],["L",n.x,n.y]]):this.arrow=this.instance.path("M"+n.x+","+n.y+"L"+c+","+h+"L"+u+","+f+"L"+n.x+","+n.y)},t.prototype.bodySharp=function(){var t=this.opt.queue,e="",o=[],r=!1,n=!0;r=!!this.c;for(var i=0;i<t.length;i++){var a=t[i];r?(n&&o.length>0&&(n=!1),o.push([n?"M":"L",a.x,a.y])):e+=(e?"L":"M")+","+a.x+","+a.y}r?this.c.attr("path",o):this.c=this.instance.path(e)},t.prototype.queueCheck=function(){var t=this.opt.queue;if(2==t.length){var e=[],o=t[0],r=t[1];o.x<r.x?e.push({x:r.x,y:o.y}):o.x>r.x&&(e.push({x:o.x,y:r.y-20}),e.push({x:r.x,y:r.y-20})),this.opt.queue=[o].concat(e,r)}},t.prototype.updatePath=function(t,e,o){var r=this.opt;if(t&&(r.queue[0]={x:t[0],y:t[1]}),e){var n=r.queue.length-1;r.queue[n]={x:e[0],y:e[1]}}this.queueCheck(),this.bodySharp(),this.arrowSharp()},t}();e.a=r},function(t,e,o){"use strict";o.d(e,"a",function(){return r});var r={version:"2.0.4",release:"20180327",author:"Joshua Conero"}},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="begin"},e.prototype._whenCreatorEvt=function(){var t=this.opt,e=t.bkg||"#851E07";this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",e)},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="task"},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.rect(t.x,t.y,t.w,t.h),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt;return{x:e.cx-e.w/2,y:e.cy-e.h/2,w:e.w,h:e.h}},e.prototype.drag=function(){this.c.drag(function(t,e){return{}},function(t,e){return{}},function(){return{}})},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="audit",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path("M"+t[0].x+","+t[0].y+"L"+t[1].x+","+t[1].y+"L"+t[2].x+","+t[2].y+"L"+t[3].x+","+t[3].y+"Z"),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx,r=e.cy,n=e.w,i=e.h,a=this.xRate;return[{x:o-n/2,y:r-i/2},{x:o+n/2+n*a,y:r-i/2},{x:o+n/2,y:r+i/2},{x:o-n/2-n*a,y:r+i/2}]},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="sign",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path("M"+t[0].x+","+t[0].y+"L"+t[1].x+","+t[1].y+"L"+t[2].x+","+t[2].y+"L"+t[3].x+","+t[3].y+"Z"),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx,r=e.cy,n=e.w,i=e.h,a=this.xRate;return[{x:o-n/2-n*a,y:r-i/2},{x:o+n/2+n*a,y:r-i/2},{x:o+n/2,y:r+i/2},{x:o-n/2,y:r+i/2}]},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="cond"},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path("M"+t[0].x+","+t[0].y+"L"+t[1].x+","+t[1].y+"L"+t[2].x+","+t[2].y+"L"+t[3].x+","+t[3].y+"Z"),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx,r=e.cy,n=e.w,i=e.h;return[{x:o,y:r-i/2},{x:o+n/2,y:r},{x:o,y:r+i/2},{x:o-n/2,y:r}]},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="subflow",this.xRate=.15},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=t.cAttr,o=t.lLine,r=t.rLine,n=this.opt.bkg||"#88EEEA";this.c=this.paper.rect(e.x,e.y,e.w,e.h),this.c.attr("fill",n),this.inlineEle=[this.paper.path("M"+o[0].x+","+o[0].y+"L"+o[1].x+","+o[1].y),this.paper.path("M"+r[0].x+","+r[0].y+"L"+r[1].x+","+r[1].y)]},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx-e.w/2,r=e.cy-e.h/2,n=e.w,i=e.h,a=this.xRate;return{cAttr:{x:o,y:r,w:n,h:i},lLine:[{x:o+n*a,y:r},{x:o+n*a,y:r+i}],rLine:[{x:o+n-n*a,y:r},{x:o+n-n*a,y:r+i}]}},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="parallel",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlineEle=this.paper.path(this._ps2Path(t.inLine))},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx-e.w/2,r=e.cy-e.h/2,n=e.w,i=e.h,a=n*(1-2*this.xRate);return{cAttr:[{x:o-a/2,y:r-i/2},{x:o+a/2,y:r-i/2},{x:o+n/2,y:r},{x:o+a/2,y:r+i/2},{x:o-a/2,y:r+i/2},{x:o-n/2,y:r}],inLine:[{x:o-a/2-.1*a,y:r},{x:o+a/2+.1*a,y:r}]}},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="merge",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlinesEle=[this.paper.path(this._ps2Path(t.vLine)),this.paper.path(this._ps2Path(t.hLine))]},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.cx-e.w/2,r=e.cy-e.h/2,n=e.w,i=e.h,a=n*(1-2*this.xRate);return{cAttr:[{x:o-a/2,y:r-i/2},{x:o+a/2,y:r-i/2},{x:o+n/2,y:r},{x:o+a/2,y:r+i/2},{x:o-a/2,y:r+i/2},{x:o-n/2,y:r}],vLine:[{x:o,y:r-i/2*.8},{x:o,y:r+i/2*.8}],hLine:[{x:o-a/2-.1*a,y:r},{x:o+a/2+.1*a,y:r}]}},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="end"},e.prototype._whenCreatorEvt=function(){var t=this.opt,e=t.bkg||"#2EF25F";this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",e)},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="line"},e.prototype._whenCreatorEvt=function(){var t=this.opt.bkg||"rgb(3, 84, 41)";this.c=this.paper.path(this._ps2Path(this.opt2Attr())),this.c.attr("fill",t)},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.P1,r=e.P2,n=e.r||.2*this.getLen(),i=Math.atan2(o.y-r.y,r.x-o.x)*(180/Math.PI),a=r.x-n*Math.cos(i*(Math.PI/180)),s=r.y+n*Math.sin(i*(Math.PI/180));return[o,r,{x:a+n*Math.cos((i+120)*(Math.PI/180)),y:s-n*Math.sin((i+120)*(Math.PI/180))},{x:a+n*Math.cos((i+240)*(Math.PI/180)),y:s-n*Math.sin((i+240)*(Math.PI/180))},r]},e.prototype.getLen=function(t){var e=t||this.opt,o=e.P1,r=e.P2;return this.getPLen(o,r)},e}(r.a);e.a=i},function(t,e,o){"use strict";var r=o(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="polyln"},e.prototype._whenCreatorEvt=function(){console.log(this.opt2Attr()),this.c=this.paper.path(this._ps2Path(this.opt2Attr()))},e.prototype.opt2Attr=function(t){var e=t||this.opt,o=e.P1,r=e.P2,n=e.h||4,i=e.rX||.35,a=this.getLen(),s=e.r||a*(1-i)*.2,p={x:o.x+a*i,y:o.y+n},c=Math.atan2(p.y-r.y,r.x-p.x)*(180/Math.PI),h=r.x-s*Math.cos(c*(Math.PI/180)),u=r.y+s*Math.sin(c*(Math.PI/180)),f=h+s*Math.cos((c+120)*(Math.PI/180)),y=u-s*Math.sin((c+120)*(Math.PI/180)),l=h+s*Math.cos((c+240)*(Math.PI/180)),x=u-s*Math.sin((c+240)*(Math.PI/180));return[o,{x:o.x+a*i,y:o.y},p,p,r,{x:f,y:y},{x:l,y:x},r]},e.prototype.getLen=function(t){var e=t||this.opt,o=e.P1,r=e.P2;return this.getPLen(o,r)},e}(r.a);e.a=i}])});