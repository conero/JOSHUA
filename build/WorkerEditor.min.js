!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=13)}([function(t,e,r){"use strict";var o=function(){function t(t,e){this.paper=t,this.fromLine=[],this.toLine=[],this.NodeType=null,e&&(this.opt=e),this._onInit()}return t.prototype.creator=function(t){return this._whenCreatorEvt(),this},t.prototype._ps2Path=function(t,e){for(var r="",o=0;o<t.length;o++)r+=(r?"L":"M")+t[o].x+","+t[o].y;return e&&(r+="Z"),r},t.prototype._ps2PathAttr=function(t,e){for(var r=[],o=0;o<t.length;o++){var n=["L"];0==r.length&&(n[0]="M"),n.push(t[o].x,t[o].y),r.push(n)}return e&&r.push(["Z"]),r},t.prototype._whenCreatorEvt=function(){},t.prototype._onInit=function(){},t.prototype.onDrag=function(){},t.prototype.recordLine=function(t,e){"from"==t?this.fromLine.push(e):"to"==t&&this.toLine.push(e)},t.prototype.syncLineMove=function(t){"function"!=typeof t&&(t=function(t,e){});for(var e=this.fromLine,r=this.toLine,o=0;o<e.length;o++){var n=e[o].c;n.attr("path");t(n,"from",e[o])}for(var i=0;i<r.length;i++){t(r[i].c,"to",r[i])}},t.prototype.toJson=function(){var t={NodeType:this.NodeType,opt:this.opt,c:{attr:this.c.attr()}};return this.label&&(t.label={attr:this.label.attr()}),t},t.prototype.getPLen=function(t,e){return Math.pow(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),.5)},t.prototype._updAttr=function(t){for(var e in t)void 0!==this.opt[e]&&(this.opt[e]=t[e]);return this},t.prototype.delete=function(){return!1},t.prototype.hide=function(){return this.c&&this.c.hide(),this.label&&this.label.hide(),this.inlinesEle&&this.inlinesEle.forEach(function(t){t.hide()}),this.inlineEle&&this.inlineEle.hide(),this},t.prototype.show=function(){return this.c&&this.c.show(),this.label&&this.label.show(),this.inlinesEle&&this.inlinesEle.forEach(function(t){t.show()}),this.inlineEle&&this.inlineEle.show(),this},t.prototype.moveable=function(){return this},t.prototype.updAttr=function(t){return this},t}();e.a=o},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="begin"},e.prototype._whenCreatorEvt=function(){var t=this.opt,e=t.bkg||"#851E07";this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",e)},e.prototype.updAttr=function(t){var e=this._updAttr(t).opt;return this.c.attr({cx:e.cx,cy:e.cy,rx:e.w/2,ry:e.h/2}),this},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="task"},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.rect(t.x,t.y,t.w,t.h),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt;return{x:e.cx-e.w/2,y:e.cy-e.h/2,w:e.w,h:e.h}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),r={x:e.x,y:e.y,width:e.w,height:e.h};this.c.attr(r)},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}},function(t,e){return{x:t,y:e}},function(){return{}}),this},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="audit",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx,o=e.cy,n=e.w,i=e.h,s=this.xRate;return[{x:r-n/2,y:o-i/2},{x:r+n/2+n*s,y:o-i/2},{x:r+n/2,y:o+i/2},{x:r-n/2-n*s,y:o+i/2}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();this.c.attr("path",this._ps2PathAttr(e,!0))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="sign",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx,o=e.cy,n=e.w,i=e.h,s=this.xRate;return[{x:r-n/2-n*s,y:o-i/2},{x:r+n/2+n*s,y:o-i/2},{x:r+n/2,y:o+i/2},{x:r-n/2,y:o+i/2}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();this.c.attr("path",this._ps2PathAttr(e,!0))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="cond"},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx,o=e.cy,n=e.w,i=e.h;return[{x:r,y:o-i/2},{x:r+n/2,y:o},{x:r,y:o+i/2},{x:r-n/2,y:o}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();this.c.attr("path",this._ps2PathAttr(e,!0))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="sub_flow",this.xRate=.15},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=t.cAttr,r=t.lLine,o=t.rLine,n=this.opt.bkg||"#88EEEA";this.c=this.paper.rect(e.x,e.y,e.w,e.h),this.c.attr("fill",n),this.inlinesEle=[this.paper.path(this._ps2Path(r)),this.paper.path(this._ps2Path(o))]},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx-e.w/2,o=e.cy-e.h/2,n=e.w,i=e.h,s=this.xRate;return{cAttr:{x:r,y:o,w:n,h:i},lLine:[{x:r+n*s,y:o},{x:r+n*s,y:o+i}],rLine:[{x:r+n-n*s,y:o},{x:r+n-n*s,y:o+i}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),r=e.cAttr,o=e.lLine,n=e.rLine;this.c.attr({x:r.x,y:r.y,width:r.w,height:r.h}),this.inlinesEle[0].attr("path",this._ps2PathAttr(o)),this.inlinesEle[1].attr("path",this._ps2PathAttr(n))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="parallel",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlineEle=this.paper.path(this._ps2Path(t.inLine))},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx-e.w/2,o=e.cy-e.h/2,n=e.w,i=e.h,s=n*(1-2*this.xRate);return{cAttr:[{x:r-s/2,y:o-i/2},{x:r+s/2,y:o-i/2},{x:r+n/2,y:o},{x:r+s/2,y:o+i/2},{x:r-s/2,y:o+i/2},{x:r-n/2,y:o}],inLine:[{x:r-s/2-.1*s,y:o},{x:r+s/2+.1*s,y:o}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),r=e.cAttr,o=e.inLine;this.c.attr("path",this._ps2PathAttr(r,!0)),this.inlineEle.attr("path",this._ps2PathAttr(o))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="merge",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlinesEle=[this.paper.path(this._ps2Path(t.vLine)),this.paper.path(this._ps2Path(t.hLine))]},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx-e.w/2,o=e.cy-e.h/2,n=e.w,i=e.h,s=n*(1-2*this.xRate);return{cAttr:[{x:r-s/2,y:o-i/2},{x:r+s/2,y:o-i/2},{x:r+n/2,y:o},{x:r+s/2,y:o+i/2},{x:r-s/2,y:o+i/2},{x:r-n/2,y:o}],vLine:[{x:r,y:o-i/2*.8},{x:r,y:o+i/2*.8}],hLine:[{x:r-s/2-.1*s,y:o},{x:r+s/2+.1*s,y:o}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),r=e.cAttr,o=e.vLine,n=e.hLine;this.c.attr("path",this._ps2PathAttr(r,!0)),this.inlinesEle[0].attr("path",this._ps2PathAttr(o)),this.inlinesEle[1].attr("path",this._ps2PathAttr(n))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="end"},e.prototype._whenCreatorEvt=function(){var t=this.opt,e=t.bkg||"#2EF25F";this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",e)},e.prototype.updAttr=function(t){var e=this._updAttr(t).opt;this.c.attr({cx:e.cx,cy:e.cy,rx:e.w/2,ry:e.h/2})},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="ln"},e.prototype._whenCreatorEvt=function(){var t=this.opt.bkg||"rgb(3, 84, 41)";this.c=this.paper.path(this._ps2Path(this.opt2Attr())),this.c.attr("fill",t)},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.P1,o=e.P2,n=e.r||.2*this.getLen(),i=Math.atan2(r.y-o.y,o.x-r.x)*(180/Math.PI),s=o.x-n*Math.cos(i*(Math.PI/180)),a=o.y+n*Math.sin(i*(Math.PI/180));return[r,o,{x:s+n*Math.cos((i+120)*(Math.PI/180)),y:a-n*Math.sin((i+120)*(Math.PI/180))},{x:s+n*Math.cos((i+240)*(Math.PI/180)),y:a-n*Math.sin((i+240)*(Math.PI/180))},o]},e.prototype.getLen=function(t){var e=t||this.opt,r=e.P1,o=e.P2;return this.getPLen(r,o)},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="ln_poly"},e.prototype._whenCreatorEvt=function(){this.c=this.paper.path(this._ps2Path(this.opt2Attr()))},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.P1,o=e.P2,n=e.h||4,i=e.rX||.35,s=this.getLen(),a=e.r||s*(1-i)*.2,c={x:r.x+s*i,y:r.y+n},h=Math.atan2(c.y-o.y,o.x-c.x)*(180/Math.PI),p=o.x-a*Math.cos(h*(Math.PI/180)),u=o.y+a*Math.sin(h*(Math.PI/180)),f=p+a*Math.cos((h+120)*(Math.PI/180)),l=u-a*Math.sin((h+120)*(Math.PI/180)),y=p+a*Math.cos((h+240)*(Math.PI/180)),d=u-a*Math.sin((h+240)*(Math.PI/180));return[r,{x:r.x+s*i,y:r.y},c,c,o,{x:f,y:l},{x:y,y:d},o]},e.prototype.getLen=function(t){var e=t||this.opt,r=e.P1,o=e.P2;return this.getPLen(r,o)},e}(o.a);e.a=i},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var o=function(){function t(){}return t.clone=function(t){t="object"==typeof t?t:{};return $.extend(!0,{},t)},t.ArrayMergeSameValue=function(t){if("object"==typeof t&&t.length&&t.length>1){for(var e={},r=[],o=0;o<t.length;o++)e[t[o]]||(r.push(t[o]),e[t[o]]=!0);t=r}return t},t.each=function(t,e){if("object"==typeof t)if($.isArray(t))for(var r=0;r<t.length&&!1!==e(r,t[r]);r++);else for(var o in t)if(!1===e(o,t[o]))break},t.ucFirst=function(t,e){e=e||"_";var r=t.split(e);return r.forEach(function(t,e){r[e]=t.substr(0,1).toUpperCase()+t.substr(1)}),r.join("")},t.isArray=function(t){return"object"==typeof t&&t instanceof Array},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(14),n=r(15),i=r(1),s=r(2),a=r(3),c=r(4),h=r(5),p=r(6),u=r(7),f=r(8),l=r(9),y=r(10),d=r(11),v=r(12),_=r(16),g=function(){function t(t){this.config=t,this.raphael=o.a.createInstance(t),this._configMergeToDefule(),this._rIdx=0,this._code2EidDick={},this._LineDragingP=null,this.nodeQueues=[],this.lineQueues=[],this.textQueues=[],this.tempNodes=[],this.MagneticCore=null,this._cerateToolBar(),this.config.stepCfg}return t.prototype._configMergeToDefule=function(){var t=this.config.pkgClr||{};t.start=t.start||"rgb(181, 216, 126)",t.opera=t.opera||"rgb(224, 223, 226)",t.judge=t.judge||"rgb(49, 174, 196)",t.end=t.end||"rgb(34, 185, 41)",t.arrow=t.arrow||"rgb(3, 84, 41)",t.NodeBox=t.NodeBox||"rgb(15, 13, 105)",this.config.pkgClr=t,this.config.prefCode=this.config.prefCode||"A",this.config.listener=this.config.listener||{},this.config.noToolBar=this.config.noToolBar||!1},t.prototype._cerateToolBar=function(){if(this.config.noToolBar)return null;this.toolbarCtrl=new _.a(this.raphael,this.config)},t.prototype._toolbar=function(){var t={},e=this.raphael,r=5,o=5;this.config.pkgClr;t.containerIst=e.rect(5,5,75,300),t.containerIst.attr("fill","#ffffff");var n,v=[];r+=20,o+=50,n=new i.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=20,n=new s.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=20,n=new a.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=20,n=new c.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=20,n=new h.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=20,n=new p.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=30,n=new u.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=20,n=new f.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=20,n=new l.a(e,{cx:r,cy:o,w:16,h:12}).creator(),v.push(n),o+=20,n=new y.a(e,{P1:{x:r-5,y:o},P2:{x:r+10,y:o}}).creator(),v.push(n),o+=20,n=new d.a(e,{P1:{x:r-5,y:o},P2:{x:r+10,y:o+4},h:4}).creator(),v.push(n),this.toolNodeIstQue=v,this._toolbarDragEvt()},t.prototype._toolbarDragEvt=function(){var t=this;this.toolNodeIstQue.forEach(function(e){var r,o=e,n=o.NodeType;o.c.drag(function(t,e,o,n){console.log(arguments),r&&r.updAttr({cx:o,cy:n})},function(e,o){r=t.newNode(n,{cx:e,cy:o,w:50,h:40}).creator().moveable(),t.nodeQueues.push(r),console.log(this,"测试：start")},function(){console.log(this,"测试：end")})})},t.prototype.newNode=function(t,e){var r,o=v.a.ucFirst(t),n=this.raphael;switch(o){case"Begin":r=new i.a(n,e);break;case"Task":r=new s.a(n,e);break;case"Audit":r=new a.a(n,e);break;case"Sign":r=new c.a(n,e);break;case"Cond":r=new h.a(n,e);break;case"SubFlow":r=new p.a(n,e);break;case"Parallel":r=new u.a(n,e);break;case"Merge":r=new f.a(n,e);break;case"End":r=new l.a(n,e);break;case"Ln":r=new y.a(n,e);break;case"LnPoly":r=new d.a(n,e)}return r},t.prototype._getOrderCode=function(){this._rIdx+=1;var t=this.config.prefCode+this._rIdx;return this._code2EidDick[t]&&(t=this._getOrderCode()),t},t.prototype.removeBBox=function(){this.MagneticCore=null;for(var t=this.nodeQueues,e=0;e<t.length;e++){var r=t[e];r.bBox&&(r.bBox.remove(),r.bBox=null)}this.removeTempNodes();for(var o=this.lineQueues,n=0;n<o.length;n++){var i=o[n];o.selectEdMk&&(i.selectEdMk=!1)}this.removeIntersectMk(),this.tempNodes=[]},t.prototype.removeTempNodes=function(){for(var t=this.tempNodes,e=0;e<t.length;e++){t[e].remove()}},t.prototype.removeNode=function(t){if(t||(t=this.getSelected()),t){var e="object"==typeof t?t:this._code2EidDick[t]?this.raphael.getById(this._code2EidDick[t]):this.raphael.getById(t);if("object"==typeof e){var r=e.id,o=!1;if("arrow"==e.NodeType&&(o=!0),e.bBox&&(e.bBox.remove(),e.bBox=null),e.label&&(e.label.remove(),e.label=null),e.selectEdMk&&(e.selectEdMk=!1),e.c.remove(),e=null,o){for(var n=this.lineQueues,i=[],s=0;s<n.length;s++){var a=n[s];r!=a.c.id&&i.push(a)}this.lineQueues=i}else{for(var c=this.nodeQueues,h=[],p=0;p<c.length;p++){var u=c[p];r!=u.c.id&&h.push(u)}this.nodeQueues=h}return this.removeBBox(),!0}}return!1},t.prototype.removeIntersectMk=function(){for(var t=this.nodeQueues,e=null,r=0;r<t.length;r++){var o=t[r];if(o._IntersectMk){o._IntersectMk=!1;var n=o.NodeType,i=this.config.pkgClr;i[n]?o.c.attr("fill",i[n]):1==(n=o.c.data("type"))?o.c.attr("fill",i.start):9==n&&o.c.attr("fill",i.end),e=o}}return e},t.prototype.removeConLine=function(t,e){if(t&&e)for(var r=this.nodeQueues,o=t.c.id,n=0;n<r.length;n++){var i=r[n],s=e+"Line";if(i[s]&&i[s].length){for(var a=i[s],c=[],h=0;h<a.length;h++){var p=a[h];o!=p.c.id&&c.push(p)}i[s]=c}}return!1},t.prototype.removeAll=function(){return this.removeAllText(),this.removeAllLine(),this.removeAllNode(),this},t.prototype.removeAllNode=function(){this.removeBBox();for(var t=this.nodeQueues,e=0;e<t.length;e++){var r=t[e];r.label&&r.label.remove(),r.c.remove()}return this.nodeQueues=[],this},t.prototype.removeAllLine=function(){this.removeBBox();for(var t=this.lineQueues,e=0;e<t.length;e++){t[e].c.remove()}return this.lineQueues=[],this},t.prototype.removeAllText=function(){this.removeBBox();for(var t=this.textQueues,e=0;e<t.length;e++){t[e].remove()}return this.textQueues=[],this},t.prototype.getNodeByCode=function(t){for(var e=null,r=this.nodeQueues,o=0;o<r.length;o++){var n=r[o];if(n.c.data("code")==t){e=n;break}}return e},t.prototype.getNodeByEid=function(t){for(var e=null,r=this.nodeQueues,o=0;o<r.length;o++){var n=r[o];if(n.c.id==t){e=n;break}}return e},t.prototype.code2Id=function(t,e){if(t&&!e)return this._code2EidDick[t]||null;if(e&&!t){var r=this._code2EidDick;for(var o in r)if(e==r[o])return o;return null}return e&&t?(this._code2EidDick[t]=e,this):void 0},t.prototype.setOption=function(t,e){if(t){"object"!=typeof t&&(t={text:t}),e||(e=this.getSelected());var r="object"==typeof e?e:this.getNodeByCode(e);r&&t.text&&r.label&&(r.label.attr("text",t.text),r.opt=r.opt||{},r.opt.text=t.text,"function"==typeof r.resizeByText&&r.resizeByText())}return!1},t.prototype.cloneNode=function(t){if(t||(t=this.getSelected()),t){var e="object"==typeof t?t:this.raphael.getById(t);if("object"==typeof e){e.id;return e.c.clone(),e.label.clone(),!0}}return!1},t.prototype.getSelected=function(){for(var t=this.nodeQueues,e=null,r=0;r<t.length;r++){var o=t[r];if(o.bBox){e=o;break}}if(!e)for(var n=this.lineQueues,i=0;i<n.length;i++){var s=n[i];s.selectEdMk&&(e=s)}return e},t.prototype.getLastElem=function(){var t=null,e=this.nodeQueues;return e.length>0&&(t=e[e.length-1]),t},t.prototype.getFlowStep=function(){for(var t=[],e=this.nodeQueues,r=0;r<e.length;r++){var o=e[r],n=this.getFlowJson(o);t.push(n)}return t},t.prototype.getFlowJson=function(t){t||(t=this.getSelected());var e={};if(t){var r=t.label||null,o=t.c;e={name:r?r.attr("text"):"",code:o.data("code"),type:o.data("type"),_struct:t.toJson()};for(var n=t.toLine,i=[],s=0;s<n.length;s++){(p=this.getLineCntCode("from",n[s].c.id,t))&&i.push(p)}e.prev=i.length>0?i.join(","):"";for(var a=t.fromLine,c=[],h=0;h<a.length;h++){var p;(p=this.getLineCntCode("to",a[h].c.id,t))&&c.push(p)}e.next=c.length>0?c.join(","):""}else e=null;return e},t.prototype.getLineCntCode=function(t,e,r){if(t&&e){var o=this.nodeQueues,n=null;r&&(n="string"==typeof r?r:r.c.data("code"));for(var i=t+"Line",s=0;s<o.length;s++){var a=o[s],c=a.c.data("code");if(n!=c)for(var h=a[i],p=0;p<h.length;p++){if(e==h[p].c.id)return c}}}return null},t.prototype.onNodeClick=function(t){},t.version=n.a,t}();e.default=g},function(t,e,r){"use strict";var o=0,n={},i=function(){function t(){}return t.createInstance=function(t){return(t="object"==typeof t?t:{}).dom,"string"==typeof t.dom&&(t.dom=$(t.dom)),t.w||(t.w=1.1*$(window).width()),t.h||(t.h=1.1*$(window).height()),Raphael(t.dom.get(0),t.w,t.h)},t.onMoveEvt=function(){},t.onStartEvt=function(){},t.onEndEvt=function(){},t.getIndex=function(){return o+=1},t.src=function(t,e,r){n[t]||(n[t]={});var o=n[t];return void 0===e?o:void 0===r?o[e]||null:void(o[e]=r)},t}();e.a=i},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var o={version:"2.0.6",release:"20180329",author:"Joshua Conero"}},function(t,e,r){"use strict";var o=r(17),n=function(){function t(t,e){this.tNodes={},this.cNodes={},this._tools=[],this.paper=t,this.ndMer=new o.a(this.paper),this.option=e,this._create()}return t.prototype._create=function(){var t,e=this,r={},o=[],n={},i=[],s=this.paper,a=5,c=5,h=(this.option.pkgClr,this.ndMer);r.title=s.rect(a,c,75,23).attr("fill","#ffffff").click(function(){var t=this.data("toggle"),o=r.icon,n=r.tBody;"H"!=t?(this.data("toggle","H"),o&&o.attr("src","./arrow_down.png"),n&&n.hide(),e.tToggle("H")):(this.data("toggle","S"),o&&o.attr("src","./arrow_up.png"),n&&n.show(),e.tToggle("S"))}),r.icon=s.image("./arrow_up.png",a+1,c+1,20,20),c+=23,r.tBody=s.rect(a,c,75,250).attr("fill","#ffffff"),a+=20,c+=50,t=h.make("begin",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),c+=20,t=h.make("task",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),c+=20,t=h.make("audit",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),c+=20,t=h.make("sign",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),c+=20,t=h.make("cond",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),c+=20,t=h.make("subFlow",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),c+=30,t=h.make("parallel",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),c+=20,t=h.make("merge",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),c+=20,t=h.make("end",{cx:a,cy:c,w:16,h:12}).creator(),o.push(t),this.tNodes=r,this.tBodyNds=o,a-=20,c+=10,n.title=s.rect(a,c,75,23).attr("fill","#ffffff").click(function(){var t=this.data("toggle"),r=n.icon,o=n.tBody;"H"!=t?(this.data("toggle","H"),r&&r.attr("src","./arrow_down.png"),o&&o.hide(),e.cToggle("H")):(this.data("toggle","S"),r&&r.attr("src","./arrow_up.png"),o&&o.show(),e.cToggle("S"))}),n.icon=s.image("./arrow_up.png",a+1,c+1,20,20),c+=23,n.tBody=s.rect(a,c,75,80).attr("fill","#ffffff"),a+=20,c+=20,t=h.make("ln",{P1:{x:a-5,y:c},P2:{x:a+10,y:c}}).creator(),i.push(t),c+=20,t=h.make("lnPoly",{P1:{x:a-5,y:c},P2:{x:a+10,y:c+4},h:4}).creator(),i.push(t),this.cNodes=n,this.cBodyNds=i},t.prototype.tToggle=function(t){var e=this.tBodyNds;"H"!=t?e.forEach(function(t){t.show()}):e.forEach(function(t){t.hide()})},t.prototype.cToggle=function(t){var e=this.cBodyNds;"H"!=t?e.forEach(function(t){t.show()}):e.forEach(function(t){t.hide()})},t}();e.a=n},function(t,e,r){"use strict";r.d(e,"a",function(){return d});var o=r(12),n=r(1),i=r(2),s=r(3),a=r(4),c=r(5),h=r(6),p=r(7),u=r(8),f=r(9),l=r(10),y=r(11),d=function(){function t(t){this.paper=t}return t.prototype.make=function(t,e){var r,d=o.a.ucFirst(t),v=this.paper;switch(d){case"Begin":r=new n.a(v,e);break;case"Task":r=new i.a(v,e);break;case"Audit":r=new s.a(v,e);break;case"Sign":r=new a.a(v,e);break;case"Cond":r=new c.a(v,e);break;case"SubFlow":r=new h.a(v,e);break;case"Parallel":r=new p.a(v,e);break;case"Merge":r=new u.a(v,e);break;case"End":r=new f.a(v,e);break;case"Ln":r=new l.a(v,e);break;case"LnPoly":r=new y.a(v,e)}return r},t}()}]);