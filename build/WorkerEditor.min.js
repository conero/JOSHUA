!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";var o=function(){function t(t,e){this.tRElem={},this._dataQueueDick={},this.isSelEd=!1,this.paper=t,this.fromLine=[],this.toLine=[],this.NodeType=null,e&&(this.opt=e),this._onInit()}return t.prototype.data=function(t,e){return void 0===e?this._dataQueueDick[t]:(this._dataQueueDick[t]=e,this._code||"_code"!=t||(this._code=e),this)},Object.defineProperty(t.prototype,"code",{get:function(){return this._code},enumerable:!0,configurable:!0}),t.prototype.creator=function(t){return this._whenCreatorEvt(),this},t.prototype._ps2Path=function(t,e){for(var n="",o=0;o<t.length;o++)n+=(n?"L":"M")+t[o].x+","+t[o].y;return e&&(n+="Z"),n},t.prototype._ps2PathAttr=function(t,e){for(var n=[],o=0;o<t.length;o++){var i=["L"];0==n.length&&(i[0]="M"),i.push(t[o].x,t[o].y),n.push(i)}return e&&n.push(["Z"]),n},t.prototype._whenCreatorEvt=function(){},t.prototype._onInit=function(){},t.prototype.onDrag=function(){},t.prototype.recordLine=function(t,e){"from"==t?this.fromLine.push(e):"to"==t&&this.toLine.push(e)},t.prototype.syncLineMove=function(t){"function"!=typeof t&&(t=function(t,e){});for(var e=this.fromLine,n=this.toLine,o=0;o<e.length;o++){var i=e[o].c;i.attr("path");t(i,"from",e[o])}for(var r=0;r<n.length;r++){t(n[r].c,"to",n[r])}},t.prototype.toJson=function(){var t={NodeType:this.NodeType,opt:this.opt,c:{attr:this.c.attr()}};return this.label&&(t.label={attr:this.label.attr()}),t},t.prototype.getPLen=function(t,e){return Math.pow(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),.5)},t.prototype._updAttr=function(t){for(var e in t)void 0!==this.opt[e]&&(this.opt[e]=t[e]);return this},t.prototype._getTextPnt=function(){var t=this.opt;return{x:t.cx+1,y:t.cy+1}},t.prototype.delete=function(){this.c.remove(),this.label&&this.label.remove(),this.inlineEle&&this.inlineEle.remove(),this.inlinesEle&&this.inlinesEle.forEach(function(t){t.remove()}),this.removeBox()},t.prototype.hide=function(){return this.c&&this.c.hide(),this.label&&this.label.hide(),this.inlinesEle&&this.inlinesEle.forEach(function(t){t.hide()}),this.inlineEle&&this.inlineEle.hide(),this},t.prototype.show=function(){return this.c&&this.c.show(),this.label&&this.label.show(),this.inlinesEle&&this.inlinesEle.forEach(function(t){t.show()}),this.inlineEle&&this.inlineEle.show(),this},t.prototype.moveable=function(){var t=this;this.c.undrag();var e={cx:0,cy:0};return this.c.drag(function(n,o){n+=e.cx,o+=e.cy,t.updAttr({cx:n,cy:o}),t.select()},function(){var n=t.opt,o=n.cx,i=n.cy;e={cx:o,cy:i}}),t},t.prototype.updAttr=function(t){return this},t.prototype.onCreateBoxPnt=function(t){},t.prototype.select=function(){var t=this.c.getBBox(),e=t.x,n=t.y,o=t.width,i=t.height,r=this.paper;this.removeBox(),this.isSelEd=!0,e-=4,n-=4,o+=8,i+=8,this.tRElem.box=r.rect(e,n,o,i).attr({stroke:"#0033FF","stroke-width":"0.8"});var s=e+o/2,h=e+o,a=n+i/2,c=n+i,p={a:{x:e,y:n},b:{x:s,y:n},c:{x:h,y:n},d:{x:h,y:a},e:{x:h,y:c},f:{x:s,y:c},g:{x:e,y:c},h:{x:e,y:a}};for(var u in p){var l=p[u],f=l.x,y=l.y;this.tRElem["__p"+u]=r.circle(f,y,2).attr("fill","#000000"),this.onCreateBoxPnt(this.tRElem["__p"+u])}return this},t.prototype.removeBox=function(){this.tRElem||(this.tRElem={}),this.tRElem.box&&(this.tRElem.box.remove(),delete this.tRElem.box);for(var t in this.tRElem)t.indexOf("__p")>-1&&(this.tRElem[t].remove(),delete this.tRElem[t]);return this},t.prototype.zoomOut=function(t){t=t||.2;this.c;var e=this.opt;return e.w=e.w*(1+t),e.h=e.h*(1+t),this.updAttr({w:e.w,h:e.h}),this.select(),this},t.prototype.zoomIn=function(t){t=t||.2;this.c;var e=this.opt;return e.w=e.w*(1-t),e.h=e.h*(1-t),this.updAttr({w:e.w,h:e.h}),this.select(),this},t.prototype.move=function(t,e){e=e||.05;var n,o=this.opt;switch(t=t?t.toUpperCase():t){case"T":n={cy:o.cy*(1-e)};break;case"B":n={cy:o.cy*(1+e)};break;case"L":n={cx:o.cx*(1-e)};break;case"R":n={cx:o.cx*(1+e)}}return n&&(this.updAttr(n),this.select()),this},t.prototype.move2T=function(t){return this.move("T",t),this},t.prototype.move2B=function(t){return this.move("B",t),this},t.prototype.move2L=function(t){return this.move("L",t),this},t.prototype.move2R=function(t){return this.move("R",t),this},t}();e.a=o},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.clone=function(t){t="object"==typeof t?t:{};return $.extend(!0,{},t)},t.ArrayMergeSameValue=function(t){if("object"==typeof t&&t.length&&t.length>1){for(var e={},n=[],o=0;o<t.length;o++)e[t[o]]||(n.push(t[o]),e[t[o]]=!0);t=n}return t},t.each=function(t,e){if("object"==typeof t)if($.isArray(t))for(var n=0;n<t.length&&!1!==e(n,t[n]);n++);else for(var o in t)if(!1===e(o,t[o]))break},t.ucFirst=function(t,e){e=e||"_";var n=t.split(e);return n.forEach(function(t,e){n[e]=t.substr(0,1).toUpperCase()+t.substr(1)}),n.join("")},t.isArray=function(t){return"object"==typeof t&&t instanceof Array},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var o=n(1),i=n(7),r=n(8),s=n(9),h=n(10),a=n(11),c=n(12),p=n(13),u=n(14),l=n(15),f=n(16),y=n(17),d=function(){function t(t){this.paper=t}return t.prototype.make=function(t,e){var n,d=o.a.ucFirst(t),v=this.paper;switch(d){case"Begin":n=new i.a(v,e);break;case"Task":n=new r.a(v,e);break;case"Audit":n=new s.a(v,e);break;case"Sign":n=new h.a(v,e);break;case"Cond":n=new a.a(v,e);break;case"SubFlow":n=new c.a(v,e);break;case"Parallel":n=new p.a(v,e);break;case"Merge":n=new u.a(v,e);break;case"End":n=new l.a(v,e);break;case"Ln":n=new f.a(v,e);break;case"LnPoly":n=new y.a(v,e)}return n},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=n(5),r=n(1),s=n(6),h=n(2),a=n(19),c=function(){function t(t){this.nodeDick={},this.tmpNodeMap={},this.config=t,this.paper=o.a.createInstance(t),this.ndMer=new h.a(this.paper),this._configMergeToDefule(),this._rIdx=0,this._code2EidDick={},this._LineDragingP=null,this.lineQueues=[],this.textQueues=[],this.tempNodes=[],this.MagneticCore=null,this._cerateToolBar(),this.config.stepCfg}return t.prototype._configMergeToDefule=function(){var t=this.config.pkgClr||{};t.start=t.start||"rgb(181, 216, 126)",t.opera=t.opera||"rgb(224, 223, 226)",t.judge=t.judge||"rgb(49, 174, 196)",t.end=t.end||"rgb(34, 185, 41)",t.arrow=t.arrow||"rgb(3, 84, 41)",t.NodeBox=t.NodeBox||"rgb(15, 13, 105)",this.config.pkgClr=t,this.config.prefCode=this.config.prefCode||"A",this.config.listener=this.config.listener||{},this.config.noToolBar=this.config.noToolBar||!1},t.prototype._cerateToolBar=function(){var t=this;if(this.config.noToolBar)return null;this.toolbarCtrl=new s.a(this.paper,this.config);var e=this,n=e.toolbarCtrl,o=n.tBodyNds,i=n.cBodyNds,h=n.connElems;r.a.each(o,function(t,n){var o,i={x:0,y:0};n.c.drag(function(t,e){t+=i.x,e+=i.y,o&&o.updAttr({cx:t,cy:e})},function(){var r=n.opt,s=r.cx,h=r.cy;i.x=s,i.y=h;var c={cx:s+=25,cy:h,w:50,h:40};a.a[t]&&(c.text=a.a[t].text),o=e.ndMer.make(t,c).creator().moveable(),e._nodeBindEvt(o);var p=e._getOrderCode();o.data("_code",p),e.nodeDick[p]=o},function(){console.log(this,"测试：end")})});var c=h.lnCon,p=h.lnPolyCon,u=e.toolbarCtrl.config,l=u.lnSeledBkg,f=u.lnDefBkg;c.data("con","ln"),p.data("con","lnPoly"),this.lineCnMode={isSelEd:!1,type:null};var y=function(){r.a.each(i,function(t,e){e.isSelEd=!1}),t.lineCnMode={isSelEd:!1,type:null},c.attr("fill",f),p.attr("fill",f)};r.a.each(i,function(t,n){n.c.click(function(){var t=n.isSelEd;y(),t||(n.isSelEd=!0,e.lineCnMode={isSelEd:!0,type:n.NodeType},"ln"==n.NodeType?c.attr("fill",l):p.attr("fill",l))})});var d=function(){!e.lineCnMode.isSelEd||e.lineCnMode.isSelEd&&this.data("con")!=e.lineCnMode.type?(y(),this.attr("fill",l),e.lineCnMode={isSelEd:!0,type:this.data("con")}):y()};c.click(d),p.click(d)},t.prototype._nodeBindEvt=function(t){var e=this,n=this.ndMer,o=function(t){t.c.click(function(){e.removeAllSeled(),t.select()}),t.onCreateBoxPnt=function(t){var o=e.tmpNodeMap.connLnIst||null;if(o&&(o.delete(),e.tmpNodeMap.connLnIst=null),e.lineCnMode.isSelEd){var i={x:0,y:0};t.drag(function(t,n){o?(t+=i.x,n+=i.y,"ln"==e.lineCnMode.type&&o.updAttr({P2:{x:t,y:n}})):console.log("选择框连线拖动出错！")},function(){i.x=this.attr("cx"),i.y=this.attr("cy"),o&&(console.log(o.NodeType,o),o.delete(),e.tmpNodeMap.connLnIst=null);var t={},r=i.x,s=i.y;t="ln"==e.lineCnMode.type?{P1:{x:r,y:s},P2:{x:r+10,y:s+5}}:{P1:{x:r,y:s},P2:{x:r+4,y:s+4},h:4},o=n.make(e.lineCnMode.type,t).creator(),e.tmpNodeMap.connLnIst=o},function(){console.log("END")})}}};if(t)o(t);else for(var i in this.nodeDick)o(this.nodeDick[i])},t.prototype.removeAllSeled=function(){for(var t in this.nodeDick){var e=this.nodeDick[t];e.isSelEd&&(e.removeBox(),e.isSelEd=!1)}},t.prototype.allSelect=function(){for(var t in this.nodeDick){this.nodeDick[t].select()}},t.prototype._getOrderCode=function(){this._rIdx+=1;var t=this.config.prefCode+this._rIdx;return this._code2EidDick[t]&&(t=this._getOrderCode()),t},t.prototype.removeTempNodes=function(){for(var t=this.tempNodes,e=0;e<t.length;e++){t[e].remove()}},t.prototype.last=function(){var t=null;for(var e in this.nodeDick)t=this.nodeDick[e];return t},t.prototype.remove=function(t){var e=this,n=!1,o=function(o){if(o){t=o.code,o.delete(),delete e.nodeDick[t],n=!0;var i=e.last();i&&i.select()}};return o(t?this.nodeDick[t]:this.getSelected()),n},t.prototype.tab=function(){var t=this.getSelected(),e=t?t.code:null,n=!1,o=!1;for(var i in this.nodeDick){var r=this.nodeDick[i];if(!t){r.select(),o=!0;break}if(n){this.removeAllSeled(),r.select(),o=!0;break}e==r.code&&(n=!0)}n&&!o&&(this.removeAllSeled(),this.tab())},t.prototype.clone=function(t){var e,n;if(e=t&&"string"==typeof t?this.nodeDick[t]:t&&"object"==typeof t?t:this.getSelected()){var o=$.extend(!0,{},e.opt);o.cx+=.2*o.w,o.cy+=.2*o.h,n=this.ndMer.make(e.NodeType,o).creator().moveable(),this.removeAllSeled(),n.select(),this._nodeBindEvt(n);var i=this._getOrderCode();n.data("_code",i),this.nodeDick[i]=n}return n},t.prototype.removeIntersectMk=function(){for(var t=this.nodeQueues,e=null,n=0;n<t.length;n++){var o=t[n];if(o._IntersectMk){o._IntersectMk=!1;var i=o.NodeType,r=this.config.pkgClr;r[i]?o.c.attr("fill",r[i]):1==(i=o.c.data("type"))?o.c.attr("fill",r.start):9==i&&o.c.attr("fill",r.end),e=o}}return e},t.prototype.removeConLine=function(t,e){if(t&&e)for(var n=this.nodeQueues,o=t.c.id,i=0;i<n.length;i++){var r=n[i],s=e+"Line";if(r[s]&&r[s].length){for(var h=r[s],a=[],c=0;c<h.length;c++){var p=h[c];o!=p.c.id&&a.push(p)}r[s]=a}}return!1},t.prototype.removeAll=function(){return this.removeAllText(),this.removeAllLine(),this.removeAllNode(),this},t.prototype.removeAllNode=function(){for(var t=this.nodeQueues,e=0;e<t.length;e++){var n=t[e];n.label&&n.label.remove(),n.c.remove()}return this.nodeQueues=[],this},t.prototype.removeAllLine=function(){for(var t=this.lineQueues,e=0;e<t.length;e++){t[e].c.remove()}return this.lineQueues=[],this},t.prototype.removeAllText=function(){for(var t=this.textQueues,e=0;e<t.length;e++){t[e].remove()}return this.textQueues=[],this},t.prototype.getNodeByCode=function(t){for(var e=null,n=this.nodeQueues,o=0;o<n.length;o++){var i=n[o];if(i.c.data("code")==t){e=i;break}}return e},t.prototype.getNodeByEid=function(t){for(var e=null,n=this.nodeQueues,o=0;o<n.length;o++){var i=n[o];if(i.c.id==t){e=i;break}}return e},t.prototype.code2Id=function(t,e){if(t&&!e)return this._code2EidDick[t]||null;if(e&&!t){var n=this._code2EidDick;for(var o in n)if(e==n[o])return o;return null}return e&&t?(this._code2EidDick[t]=e,this):void 0},t.prototype.setOption=function(t,e){if(t){"object"!=typeof t&&(t={text:t}),e||(e=this.getSelected());var n="object"==typeof e?e:this.getNodeByCode(e);n&&t.text&&n.label&&(n.label.attr("text",t.text),n.opt=n.opt||{},n.opt.text=t.text,"function"==typeof n.resizeByText&&n.resizeByText())}return!1},t.prototype.cloneNode=function(t){if(t||(t=this.getSelected()),t){var e="object"==typeof t?t:this.paper.getById(t);if("object"==typeof e){e.id;return e.c.clone(),e.label.clone(),!0}}return!1},t.prototype.getSelected=function(){this.nodeQueues;var t=null;for(var e in this.nodeDick)if(this.nodeDick[e].isSelEd){t=this.nodeDick[e];break}if(!t)for(var n=this.lineQueues,o=0;o<n.length;o++){var i=n[o];i.selectEdMk&&(t=i)}return t},t.prototype.getLastElem=function(){var t=null,e=this.nodeQueues;return e.length>0&&(t=e[e.length-1]),t},t.prototype.getFlowStep=function(){for(var t=[],e=this.nodeQueues,n=0;n<e.length;n++){var o=e[n],i=this.getFlowJson(o);t.push(i)}return t},t.prototype.getFlowJson=function(t){t||(t=this.getSelected());var e={};if(t){var n=t.label||null,o=t.c;e={name:n?n.attr("text"):"",code:o.data("code"),type:o.data("type"),_struct:t.toJson()};for(var i=t.toLine,r=[],s=0;s<i.length;s++){(p=this.getLineCntCode("from",i[s].c.id,t))&&r.push(p)}e.prev=r.length>0?r.join(","):"";for(var h=t.fromLine,a=[],c=0;c<h.length;c++){var p;(p=this.getLineCntCode("to",h[c].c.id,t))&&a.push(p)}e.next=a.length>0?a.join(","):""}else e=null;return e},t.prototype.getLineCntCode=function(t,e,n){if(t&&e){var o=this.nodeQueues,i=null;n&&(i="string"==typeof n?n:n.c.data("code"));for(var r=t+"Line",s=0;s<o.length;s++){var h=o[s],a=h.c.data("code");if(i!=a)for(var c=h[r],p=0;p<c.length;p++){if(e==c[p].c.id)return a}}}return null},t.prototype.onNodeClick=function(t){},t.version=i.a,t}();e.default=c},function(t,e,n){"use strict";var o=0,i={},r=function(){function t(){}return t.createInstance=function(t){return(t="object"==typeof t?t:{}).dom,"string"==typeof t.dom&&(t.dom=$(t.dom)),t.w||(t.w=1.1*$(window).width()),t.h||(t.h=1.1*$(window).height()),Raphael(t.dom.get(0),t.w,t.h)},t.onMoveEvt=function(){},t.onStartEvt=function(){},t.onEndEvt=function(){},t.getIndex=function(){return o+=1},t.src=function(t,e,n){i[t]||(i[t]={});var o=i[t];return void 0===e?o:void 0===n?o[e]||null:void(o[e]=n)},t}();e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={version:"2.0.8",release:"20180331",author:"Joshua Conero"}},function(t,e,n){"use strict";var o=n(2),i=n(18),r=n(1),s=function(){function t(t,e){this._tools=[],this.rData={cp:{x:5,y:5},th0:23,th1:23,th2:23,nh:0,ch:0,cw:75},this.paper=t,this.ndMer=new o.a(this.paper),this.option=e,this.config=e.toolBar||{},this.config.aUpSrc=i.a.value(this.config,"aUpSrc","arrow_up.png"),this.config.aDownSrc=i.a.value(this.config,"aDownSrc","arrow_down.png"),this._headBar(),this._nodeBar(),this._connBar()}return t.prototype._headBar=function(){var t,e=this,n=this.rData,o=n.cp,r=n.cw,s=n.th0,h=o.x,a=o.y,c=this.paper;this.headElems={},t=c.rect(h,a,r,s).attr("fill","#ffffff").click(function(){"H"!=this.data("toggle")?(this.data("toggle","H"),e.toggle("H")):(this.data("toggle","S"),e.toggle("S"))}),this.headElems.con=t,t=c.text(h+r/2,a+10,i.a.value(this.config,"title","工具栏")),this.headElems.title=t},t.prototype._nodeBar=function(){var t,e=this,n=this.rData,o=n.cp,i=n.cw,r=n.th1,s=n.nh,h=o.x,a=o.y,c=this.paper,p=this.ndMer,u=this.config,l={};this.nodeElems={},a+=r,this.nodeElems.title=c.rect(h,a,i,23).attr("fill","#ffffff").click(function(){var t=this.data("toggle"),n=e.nodeElems.icon;"H"!=t?(this.data("toggle","H"),n&&n.attr("src",u.aDownSrc),e.tToggle("H")):(this.data("toggle","S"),n&&n.attr("src",u.aUpSrc),e.tToggle("S"))}),this.nodeElems.icon=c.image(u.aUpSrc,h+.7*i,a+1,20,20),s=a,a+=23,this.nodeElems.tBody=c.rect(h,a,i,250).attr("fill","#ffffff"),h+=20,a+=10,t=p.make("begin",{cx:h,cy:a,w:16,h:12}).creator(),l.begin=t,a+=20,t=p.make("task",{cx:h,cy:a,w:16,h:12}).creator(),l.task=t,a+=20,t=p.make("audit",{cx:h,cy:a,w:16,h:12}).creator(),l.audit=t,a+=20,t=p.make("sign",{cx:h,cy:a,w:16,h:12}).creator(),l.sign=t,a+=20,t=p.make("cond",{cx:h,cy:a,w:16,h:12}).creator(),l.cond=t,a+=20,t=p.make("subFlow",{cx:h,cy:a,w:16,h:12}).creator(),l.subFlow=t,a+=30,t=p.make("parallel",{cx:h,cy:a,w:16,h:12}).creator(),l.parallel=t,a+=20,t=p.make("merge",{cx:h,cy:a,w:16,h:12}).creator(),l.merge=t,a+=20,t=p.make("end",{cx:h,cy:a,w:16,h:12}).creator(),l.end=t,this.tBodyNds=l,this.rData.nh=a-s,this.nodeElems.tBody.attr("height",this.rData.nh)},t.prototype._connBar=function(){var t,e=this,n=this.rData,o=n.cp,i=n.cw,r=n.th2,s=n.ch,h=n.th0,a=n.th1,c=n.nh,p=o.x,u=o.y,l=this.paper,f=this.ndMer,y=this.config,d={};this.connElems={},u+=h+a+c,this.connElems.title=l.rect(p,u,i,r).attr("fill","#ffffff").click(function(){var t=this.data("toggle"),n=e.connElems.icon;"H"!=t?(this.data("toggle","H"),n&&n.attr("src",y.aDownSrc),e.cToggle("H")):(this.data("toggle","S"),n&&n.attr("src",y.aUpSrc),e.cToggle("S"))}),this.connElems.icon=l.image(y.aUpSrc,p+.7*i,u+1,20,20),s=u,u+=r;this.config.lnSeledBkg=this.config.lnSeledBkg||"#CCFF99",this.config.lnDefBkg=this.config.lnDefBkg||"#ffffff";var v=this.config.lnDefBkg;this.connElems.lnCon=l.rect(p,u,i,30).attr("fill",v);var x=u+10.5,_=p+20;t=f.make("ln",{P1:{x:_-5,y:x},P2:{x:_+25,y:x}}).creator(),d.ln=t,u+=20,this.connElems.lnPolyCon=l.rect(p,u,i,30).attr("fill",v),x=u+10.5,_=p+20,t=f.make("lnPoly",{P1:{x:_-5,y:x},P2:{x:_+20,y:x+4},h:4}).creator(),d.lnPoly=t,this.cBodyNds=d,s=u-s,this.connElems.lnCon.attr("height",s/2),this.connElems.lnPolyCon.attr("height",s/2)},t.prototype.connSizeNode=function(t){var e=this.connElems,n=e.title,o=e.icon,i=e.lnCon,r=e.lnPolyCon,s=this.rData,h=s.cp,a=(s.cw,s.th2),c=(s.ch,s.th0),p=s.th1,u=s.nh,l=h.x,f=h.y,y=this.cBodyNds,d=y.ln,v=y.lnPoly;f+=t?c+p+u:c+p,n.attr("y",f),o.attr("y",f+1),f+=a;i.attr("y",f);var x=f+10.5,_=l+20;d.updAttr({P1:{x:_-5,y:x},P2:{x:_+25,y:x}}),f+=20,r.attr("y",f),x=f+10.5,_=l+20,v.updAttr({P1:{x:_-5,y:x},P2:{x:_+20,y:x+4},h:4})},t.prototype.tToggle=function(t,e){var n=this.tBodyNds,o=this.nodeElems,i=o.tBody;"H"!=t?(r.a.each(n,function(t,e){e.show()}),e&&(o.title.show(),o.icon.show()),i&&i.show(),this.connSizeNode(!0)):(r.a.each(n,function(t,e){e.hide()}),e&&(o.title.hide(),o.icon.hide()),i&&i.hide(),this.connSizeNode())},t.prototype.cToggle=function(t,e){var n=this.cBodyNds,o=this.connElems,i=o.lnCon,s=o.lnPolyCon;"H"!=t?(r.a.each(n,function(t,e){e.show()}),e&&(o.title.show(),o.icon.show()),i&&i.show(),s&&s.show()):(r.a.each(n,function(t,e){e.hide()}),e&&(o.title.hide(),o.icon.hide()),i&&i.hide(),s&&s.hide())},t.prototype.toggle=function(t){this.tToggle(t,!0),this.cToggle(t,!0)},t}();e.a=s},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="begin"},e.prototype._whenCreatorEvt=function(){var t=this.opt,e=t.bkg||"#851E07";if(this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",e),t.text){var n=this._getTextPnt(),o=n.x,i=n.y;this.label=this.paper.text(o,i,t.text)}},e.prototype.updAttr=function(t){var e=this._updAttr(t).opt;if(this.c.attr({cx:e.cx,cy:e.cy,rx:e.w/2,ry:e.h/2}),this.label){var n=this._getTextPnt(),o=n.x,i=n.y;this.label.attr({x:o,y:i})}return this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="task"},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt,n=e.bkg||"#88EEEA";if(this.c=this.paper.rect(t.x,t.y,t.w,t.h),this.c.attr("fill",n),e.text){var o=this._getTextPnt(),i=o.x,r=o.y;this.label=this.paper.text(i,r,e.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt;return{x:e.cx-e.w/2,y:e.cy-e.h/2,w:e.w,h:e.h}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),n={x:e.x,y:e.y,width:e.w,height:e.h};if(this.c.attr(n),this.label){var o=this._getTextPnt(),i=o.x,r=o.y;this.label.attr({x:i,y:r})}return this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="audit",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt,n=e.bkg||"#88EEEA";if(this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",n),e.text){var o=this._getTextPnt(),i=o.x,r=o.y;this.label=this.paper.text(i,r,e.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt,n=e.cx,o=e.cy,i=e.w,r=e.h,s=this.xRate;return[{x:n-i/2,y:o-r/2},{x:n+i/2+i*s,y:o-r/2},{x:n+i/2,y:o+r/2},{x:n-i/2-i*s,y:o+r/2}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();if(this.c.attr("path",this._ps2PathAttr(e,!0)),this.label){var n=this._getTextPnt(),o=n.x,i=n.y;this.label.attr({x:o,y:i})}return this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="sign",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt,n=e.bkg||"#88EEEA";if(this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",n),e.text){var o=this._getTextPnt(),i=o.x,r=o.y;this.label=this.paper.text(i,r,e.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt,n=e.cx,o=e.cy,i=e.w,r=e.h,s=this.xRate;return[{x:n-i/2-i*s,y:o-r/2},{x:n+i/2+i*s,y:o-r/2},{x:n+i/2,y:o+r/2},{x:n-i/2,y:o+r/2}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();if(this.c.attr("path",this._ps2PathAttr(e,!0)),this.label){var n=this._getTextPnt(),o=n.x,i=n.y;this.label.attr({x:o,y:i})}return this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="cond"},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt,n=e.bkg||"#88EEEA";if(this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",n),e.text){var o=this._getTextPnt(),i=o.x,r=o.y;this.label=this.paper.text(i,r,e.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt,n=e.cx,o=e.cy,i=e.w,r=e.h;return[{x:n,y:o-r/2},{x:n+i/2,y:o},{x:n,y:o+r/2},{x:n-i/2,y:o}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();if(this.c.attr("path",this._ps2PathAttr(e,!0)),this.label){var n=this._getTextPnt(),o=n.x,i=n.y;this.label.attr({x:o,y:i})}return this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="sub_flow",this.xRate=.15},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=t.cAttr,n=t.lLine,o=t.rLine,i=this.opt,r=i.bkg||"#88EEEA";if(this.c=this.paper.rect(e.x,e.y,e.w,e.h),this.c.attr("fill",r),this.inlinesEle=[this.paper.path(this._ps2Path(n)),this.paper.path(this._ps2Path(o))],i.text){var s=this._getTextPnt(),h=s.x,a=s.y;this.label=this.paper.text(h,a,i.text)}},e.prototype.opt2Attr=function(t){var e=t||this.opt,n=e.cx-e.w/2,o=e.cy-e.h/2,i=e.w,r=e.h,s=this.xRate;return{cAttr:{x:n,y:o,w:i,h:r},lLine:[{x:n+i*s,y:o},{x:n+i*s,y:o+r}],rLine:[{x:n+i-i*s,y:o},{x:n+i-i*s,y:o+r}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),n=e.cAttr,o=e.lLine,i=e.rLine;if(this.c.attr({x:n.x,y:n.y,width:n.w,height:n.h}),this.inlinesEle[0].attr("path",this._ps2PathAttr(o)),this.inlinesEle[1].attr("path",this._ps2PathAttr(i)),this.label){var r=this._getTextPnt(),s=r.x,h=r.y;this.label.attr({x:s,y:h})}return this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="parallel",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlineEle=this.paper.path(this._ps2Path(t.inLine))},e.prototype.opt2Attr=function(t){var e=t||this.opt,n=e.cx-e.w/2,o=e.cy-e.h/2,i=e.w,r=e.h,s=i*(1-2*this.xRate);return{cAttr:[{x:n-s/2,y:o-r/2},{x:n+s/2,y:o-r/2},{x:n+i/2,y:o},{x:n+s/2,y:o+r/2},{x:n-s/2,y:o+r/2},{x:n-i/2,y:o}],inLine:[{x:n-s/2-.1*s,y:o},{x:n+s/2+.1*s,y:o}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),n=e.cAttr,o=e.inLine;return this.c.attr("path",this._ps2PathAttr(n,!0)),this.inlineEle.attr("path",this._ps2PathAttr(o)),this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="merge",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlinesEle=[this.paper.path(this._ps2Path(t.vLine)),this.paper.path(this._ps2Path(t.hLine))]},e.prototype.opt2Attr=function(t){var e=t||this.opt,n=e.cx-e.w/2,o=e.cy-e.h/2,i=e.w,r=e.h,s=i*(1-2*this.xRate);return{cAttr:[{x:n-s/2,y:o-r/2},{x:n+s/2,y:o-r/2},{x:n+i/2,y:o},{x:n+s/2,y:o+r/2},{x:n-s/2,y:o+r/2},{x:n-i/2,y:o}],vLine:[{x:n,y:o-r/2*.8},{x:n,y:o+r/2*.8}],hLine:[{x:n-s/2-.1*s,y:o},{x:n+s/2+.1*s,y:o}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),n=e.cAttr,o=e.vLine,i=e.hLine;return this.c.attr("path",this._ps2PathAttr(n,!0)),this.inlinesEle[0].attr("path",this._ps2PathAttr(o)),this.inlinesEle[1].attr("path",this._ps2PathAttr(i)),this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="end"},e.prototype._whenCreatorEvt=function(){var t=this.opt,e=t.bkg||"#2EF25F";if(this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",e),t.text){var n=this._getTextPnt(),o=n.x,i=n.y;this.label=this.paper.text(o,i,t.text)}},e.prototype.updAttr=function(t){var e=this._updAttr(t).opt;if(this.c.attr({cx:e.cx,cy:e.cy,rx:e.w/2,ry:e.h/2}),this.label){var n=this._getTextPnt(),o=n.x,i=n.y;this.label.attr({x:o,y:i})}return this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="ln",this.data("maxR",5)},e.prototype._whenCreatorEvt=function(){var t=this.opt.bkg||"rgb(3, 84, 41)";this.c=this.paper.path(this._ps2Path(this.opt2Attr())),this.c.attr("fill",t)},e.prototype.opt2Attr=function(t){var e=t||this.opt,n=e.P1,o=e.P2,i=e.r||.2*this.getLen(),r=this.data("maxR");i>r&&(i=r);var s=Math.atan2(n.y-o.y,o.x-n.x)*(180/Math.PI),h=o.x-i*Math.cos(s*(Math.PI/180)),a=o.y+i*Math.sin(s*(Math.PI/180));return[n,o,{x:h+i*Math.cos((s+120)*(Math.PI/180)),y:a-i*Math.sin((s+120)*(Math.PI/180))},{x:h+i*Math.cos((s+240)*(Math.PI/180)),y:a-i*Math.sin((s+240)*(Math.PI/180))},o]},e.prototype.updAttr=function(t){return this._updAttr(t),this.c.attr("path",this._ps2PathAttr(this.opt2Attr())),this},e.prototype.getLen=function(t){var e=t||this.opt,n=e.P1,o=e.P2;return this.getPLen(n,o)},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=n(0),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._onInit=function(){this.NodeType="ln_poly"},e.prototype._whenCreatorEvt=function(){this.c=this.paper.path(this._ps2Path(this.opt2Attr()))},e.prototype.opt2Attr=function(t){var e=t||this.opt,n=e.P1,o=e.P2,i=e.h||4,r=e.rX||.35,s=this.getLen(),h=e.r||s*(1-r)*.2,a={x:n.x+s*r,y:n.y+i},c=Math.atan2(a.y-o.y,o.x-a.x)*(180/Math.PI),p=o.x-h*Math.cos(c*(Math.PI/180)),u=o.y+h*Math.sin(c*(Math.PI/180)),l=p+h*Math.cos((c+120)*(Math.PI/180)),f=u-h*Math.sin((c+120)*(Math.PI/180)),y=p+h*Math.cos((c+240)*(Math.PI/180)),d=u-h*Math.sin((c+240)*(Math.PI/180));return[n,{x:n.x+s*r,y:n.y},a,a,o,{x:l,y:f},{x:y,y:d},o]},e.prototype.getLen=function(t){var e=t||this.opt,n=e.P1,o=e.P2;return this.getPLen(n,o)},e.prototype.updAttr=function(t){return this._updAttr(t),this.c.attr("path",this._ps2PathAttr(this.opt2Attr())),this},e}(o.a);e.a=r},function(t,e,n){"use strict";var o=function(){function t(t){"object"!=typeof t||t instanceof Array?this.jsonObj={}:this.jsonObj=t}return t.prototype.get=function(t,e){return void 0!==this.jsonObj[t]?this.jsonObj[t]:e},t.prototype.set=function(t,e){return this.jsonObj[t]=e,this},t.value=function(t,e,n){return"object"==typeof t?void 0===t[e]?n:t[e]:n},t}();e.a=o},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={begin:{type:1,text:"开始"},task:{type:2,text:"任务"},cond:{type:3,text:"判断"},audit:{type:4,text:"审核"},sign:{type:5,text:"会签"},parallel:{type:6,text:"并行"},merge:{type:7,text:"合并"},subFlow:{type:8,text:"子流程"},end:{type:9,text:"结束"}}}]);