!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,r){"use strict";var o=function(){function t(t,e){this.paper=t,this.fromLine=[],this.toLine=[],this.NodeType=null,e&&(this.opt=e),this._onInit()}return t.prototype.creator=function(t){return this._whenCreatorEvt(),this},t.prototype._ps2Path=function(t,e){for(var r="",o=0;o<t.length;o++)r+=(r?"L":"M")+t[o].x+","+t[o].y;return e&&(r+="Z"),r},t.prototype._ps2PathAttr=function(t,e){for(var r=[],o=0;o<t.length;o++){var n=["L"];0==r.length&&(n[0]="M"),n.push(t[o].x,t[o].y),r.push(n)}return e&&r.push(["Z"]),r},t.prototype._whenCreatorEvt=function(){},t.prototype._onInit=function(){},t.prototype.onDrag=function(){},t.prototype.recordLine=function(t,e){"from"==t?this.fromLine.push(e):"to"==t&&this.toLine.push(e)},t.prototype.syncLineMove=function(t){"function"!=typeof t&&(t=function(t,e){});for(var e=this.fromLine,r=this.toLine,o=0;o<e.length;o++){var n=e[o].c;n.attr("path");t(n,"from",e[o])}for(var i=0;i<r.length;i++){t(r[i].c,"to",r[i])}},t.prototype.toJson=function(){var t={NodeType:this.NodeType,opt:this.opt,c:{attr:this.c.attr()}};return this.label&&(t.label={attr:this.label.attr()}),t},t.prototype.getPLen=function(t,e){return Math.pow(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2),.5)},t.prototype._updAttr=function(t){for(var e in t)void 0!==this.opt[e]&&(this.opt[e]=t[e]);return this},t.prototype.delete=function(){return!1},t.prototype.moveable=function(){return this},t.prototype.updAttr=function(t){return this},t}();e.a=o},function(t,e,r){"use strict";var o=function(){function t(){this.fromLine=[],this.toLine=[],this.NodeType=null}return t.prototype.recordLine=function(t,e){"from"==t?this.fromLine.push(e):"to"==t&&this.toLine.push(e)},t.prototype.syncLineMove=function(t){"function"!=typeof t&&(t=function(t,e){});for(var e=this.fromLine,r=this.toLine,o=0;o<e.length;o++){var n=e[o].c;n.attr("path");t(n,"from",e[o])}for(var i=0;i<r.length;i++){t(r[i].c,"to",r[i])}},t.prototype.toJson=function(){var t={NodeType:this.NodeType,opt:this.opt,c:{attr:this.c.attr()}};return this.label&&(t.label={attr:this.label.attr()}),t},t}();e.a=o},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var o=function(){function t(){}return t.clone=function(t){t="object"==typeof t?t:{};return $.extend(!0,{},t)},t.ArrayMergeSameValue=function(t){if("object"==typeof t&&t.length&&t.length>1){for(var e={},r=[],o=0;o<t.length;o++)e[t[o]]||(r.push(t[o]),e[t[o]]=!0);t=r}return t},t.each=function(t,e){if("object"==typeof t)if($.isArray(t))for(var r=0;r<t.length&&!1!==e(r,t[r]);r++);else for(var o in t)if(!1===e(o,t[o]))break},t.ucFirst=function(t,e){e=e||"_";var r=t.split(e);return r.forEach(function(t,e){r[e]=t.substr(0,1).toUpperCase()+t.substr(1)}),r.join("")},t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(4),n=r(5),i=r(12),a=r(13),p=r(14),s=r(15),c=r(16),h=r(17),u=r(18),f=r(19),y=r(20),l=r(21),v=r(22),x=r(23),d=r(2),g={type:1802,text:"文本框",size:10,selected:{"font-size":20,fill:"red"},defAtrr:{"font-size":10,fill:"black"}},_=function(){function t(t){if(this.config=t,this.raphael=o.a.createInstance(t),this._configMergeToDefule(),this._rIdx=0,this._code2EidDick={},this._LineDragingP=null,this.flow=new n.a(this.raphael),this.nodeQueues=[],this.lineQueues=[],this.textQueues=[],this.tempNodes=[],this.MagneticCore=null,this.config.noToolBar||this._toolbar(),this.config.stepCfg)try{this.loadStep(this.config.stepCfg)}catch(t){console.log(t)}}return t.prototype._configMergeToDefule=function(){var t=this.config.pkgClr||{};t.start=t.start||"rgb(181, 216, 126)",t.opera=t.opera||"rgb(224, 223, 226)",t.judge=t.judge||"rgb(49, 174, 196)",t.end=t.end||"rgb(34, 185, 41)",t.arrow=t.arrow||"rgb(3, 84, 41)",t.NodeBox=t.NodeBox||"rgb(15, 13, 105)",this.config.pkgClr=t,this.config.prefCode=this.config.prefCode||"A",this.config.listener=this.config.listener||{},this.config.noToolBar=this.config.noToolBar||!1},t.prototype._toolbar=function(){var t={},e=this.raphael,r=5,o=5;this.config.pkgClr;t.containerIst=e.rect(5,5,75,300),t.containerIst.attr("fill","#ffffff");var n,i=[];r+=20,o+=50,n=new a.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=20,n=new p.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=20,n=new s.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=20,n=new c.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=20,n=new h.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=20,n=new u.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=30,n=new f.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=20,n=new y.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=20,n=new l.a(e,{cx:r,cy:o,w:16,h:12}).creator(),i.push(n),o+=20,n=new v.a(e,{P1:{x:r-5,y:o},P2:{x:r+10,y:o}}).creator(),i.push(n),o+=20,n=new x.a(e,{P1:{x:r-5,y:o},P2:{x:r+10,y:o+4},h:4}).creator(),i.push(n),this.toolNodeIstQue=i,this._toolbarDragEvt()},t.prototype._toolbarDragEvt=function(){var t=this;this.toolNodeIstQue.forEach(function(e){var r,o=e,n=o.NodeType;o.c.drag(function(t,e,o,n){console.log(arguments),r&&r.updAttr({cx:o,cy:n})},function(e,o){r=t.newNode(n,{cx:e,cy:o,w:50,h:40}).creator().moveable(),t.nodeQueues.push(r),console.log(this,"测试：start")},function(){console.log(this,"测试：end")})})},t.prototype.newNode=function(t,e){var r,o=d.a.ucFirst(t),n=this.raphael;switch(o){case"Begin":r=new a.a(n,e);break;case"Task":r=new p.a(n,e);break;case"Audit":r=new s.a(n,e);break;case"Sign":r=new c.a(n,e);break;case"Cond":r=new h.a(n,e);break;case"SubFlow":r=new u.a(n,e);break;case"Parallel":r=new f.a(n,e);break;case"Merge":r=new y.a(n,e);break;case"End":r=new l.a(n,e);break;case"Ln":r=new v.a(n,e);break;case"LnPoly":r=new x.a(n,e)}return r},t.prototype._getOrderCode=function(){this._rIdx+=1;var t=this.config.prefCode+this._rIdx;return this._code2EidDick[t]&&(t=this._getOrderCode()),t},t.prototype.removeBBox=function(){this.MagneticCore=null;for(var t=this.nodeQueues,e=0;e<t.length;e++){var r=t[e];r.bBox&&(r.bBox.remove(),r.bBox=null)}this.removeTempNodes();for(var o=this.lineQueues,n=0;n<o.length;n++){var i=o[n];o.selectEdMk&&(i.selectEdMk=!1)}this.removeIntersectMk(),this._removeTxtSelect(),this.tempNodes=[]},t.prototype.removeTempNodes=function(){for(var t=this.tempNodes,e=0;e<t.length;e++){t[e].remove()}},t.prototype.removeNode=function(t){if(t||(t=this.getSelected()),t){var e="object"==typeof t?t:this._code2EidDick[t]?this.raphael.getById(this._code2EidDick[t]):this.raphael.getById(t);if("object"==typeof e){var r=e.id,o=!1;if("arrow"==e.NodeType&&(o=!0),e.bBox&&(e.bBox.remove(),e.bBox=null),e.label&&(e.label.remove(),e.label=null),e.selectEdMk&&(e.selectEdMk=!1),e.c.remove(),e=null,o){for(var n=this.lineQueues,i=[],a=0;a<n.length;a++){var p=n[a];r!=p.c.id&&i.push(p)}this.lineQueues=i}else{for(var s=this.nodeQueues,c=[],h=0;h<s.length;h++){var u=s[h];r!=u.c.id&&c.push(u)}this.nodeQueues=c}return this.removeBBox(),!0}}return!1},t.prototype.removeIntersectMk=function(){for(var t=this.nodeQueues,e=null,r=0;r<t.length;r++){var o=t[r];if(o._IntersectMk){o._IntersectMk=!1;var n=o.NodeType,i=this.config.pkgClr;i[n]?o.c.attr("fill",i[n]):1==(n=o.c.data("type"))?o.c.attr("fill",i.start):9==n&&o.c.attr("fill",i.end),e=o}}return e},t.prototype.removeConLine=function(t,e){if(t&&e)for(var r=this.nodeQueues,o=t.c.id,n=0;n<r.length;n++){var i=r[n],a=e+"Line";if(i[a]&&i[a].length){for(var p=i[a],s=[],c=0;c<p.length;c++){var h=p[c];o!=h.c.id&&s.push(h)}i[a]=s}}return!1},t.prototype.removeAll=function(){return this.removeAllText(),this.removeAllLine(),this.removeAllNode(),this},t.prototype.removeAllNode=function(){this.removeBBox();for(var t=this.nodeQueues,e=0;e<t.length;e++){var r=t[e];r.label&&r.label.remove(),r.c.remove()}return this.nodeQueues=[],this},t.prototype.removeAllLine=function(){this.removeBBox();for(var t=this.lineQueues,e=0;e<t.length;e++){t[e].c.remove()}return this.lineQueues=[],this},t.prototype.removeAllText=function(){this.removeBBox();for(var t=this.textQueues,e=0;e<t.length;e++){t[e].remove()}return this.textQueues=[],this},t.prototype.getNodeByCode=function(t){for(var e=null,r=this.nodeQueues,o=0;o<r.length;o++){var n=r[o];if(n.c.data("code")==t){e=n;break}}return e},t.prototype.getNodeByEid=function(t){for(var e=null,r=this.nodeQueues,o=0;o<r.length;o++){var n=r[o];if(n.c.id==t){e=n;break}}return e},t.prototype.code2Id=function(t,e){if(t&&!e)return this._code2EidDick[t]||null;if(e&&!t){var r=this._code2EidDick;for(var o in r)if(e==r[o])return o;return null}return e&&t?(this._code2EidDick[t]=e,this):void 0},t.prototype.setOption=function(t,e){if(t){"object"!=typeof t&&(t={text:t}),e||(e=this.getSelected());var r="object"==typeof e?e:this.getNodeByCode(e);r&&t.text&&r.label&&(r.label.attr("text",t.text),r.opt=r.opt||{},r.opt.text=t.text,"function"==typeof r.resizeByText&&r.resizeByText())}return!1},t.prototype.cloneNode=function(t){if(t||(t=this.getSelected()),t){var e="object"==typeof t?t:this.raphael.getById(t);if("object"==typeof e){e.id;return e.c.clone(),e.label.clone(),!0}}return!1},t.prototype.getSelected=function(){for(var t=this.nodeQueues,e=null,r=0;r<t.length;r++){var o=t[r];if(o.bBox){e=o;break}}if(!e)for(var n=this.lineQueues,i=0;i<n.length;i++){var a=n[i];a.selectEdMk&&(e=a)}return e},t.prototype.getLastElem=function(){var t=null,e=this.nodeQueues;return e.length>0&&(t=e[e.length-1]),t},t.prototype.getFlowStep=function(){for(var t=[],e=this.nodeQueues,r=0;r<e.length;r++){var o=e[r],n=this.getFlowJson(o);t.push(n)}return t},t.prototype.getFlowJson=function(t){t||(t=this.getSelected());var e={};if(t){var r=t.label||null,o=t.c;e={name:r?r.attr("text"):"",code:o.data("code"),type:o.data("type"),_struct:t.toJson()};for(var n=t.toLine,i=[],a=0;a<n.length;a++){(h=this.getLineCntCode("from",n[a].c.id,t))&&i.push(h)}e.prev=i.length>0?i.join(","):"";for(var p=t.fromLine,s=[],c=0;c<p.length;c++){var h;(h=this.getLineCntCode("to",p[c].c.id,t))&&s.push(h)}e.next=s.length>0?s.join(","):""}else e=null;return e},t.prototype.getLineCntCode=function(t,e,r){if(t&&e){var o=this.nodeQueues,n=null;r&&(n="string"==typeof r?r:r.c.data("code"));for(var i=t+"Line",a=0;a<o.length;a++){var p=o[a],s=p.c.data("code");if(n!=s)for(var c=p[i],h=0;h<c.length;h++){if(e==c[h].c.id)return s}}}return null},t.prototype.getIntersectElem=function(t){var e=null;if("object"==typeof t)for(var r=this.nodeQueues,o=0;o<r.length;o++){var n=r[o],i=n.NodeType;if("endpnt"==i){var a=(h=n.c).attr("cx"),p=h.attr("cy"),s=h.attr("rx"),c=h.attr("ry");if(t.x>=a-s&&t.x<=a+s&&t.y>=p-c&&t.y<=p+c){e=n;break}}else if("opera"==i){var h,u=(h=n.c).attr("x"),f=h.attr("y"),y=h.attr("width"),l=h.attr("height");if(t.x>=u&&t.x<=u+y&&t.y>=f&&t.y<=f+l){e=n;break}}else if("judge"==i){var v=n.opt;a=v.cx,p=v.cy,l=v.h,y=v.w;if(t.x>=a-y/2&&t.x<=a+y/2&&t.y>=p-l/2&&t.y<=p+l/2){e=n;break}}}return e},t.prototype.loadStep=function(t){if("object"==typeof t){for(var e={},r=this.config.pkgClr,o=function(t,r){if(-1==t.indexOf(","))for(var o=-1==r.indexOf(",")?[r]:r.split(","),n=0;n<o.length;n++){var i=t+"__"+o[n];e[i]||(e[i]=!0)}else if(-1==r.indexOf(","))for(var a=-1==t.indexOf(",")?[t]:t.split(","),p=0;p<a.length;p++){i=a[p]+"__"+r;e[i]||(e[i]=!0)}},n=0;n<t.length;n++){var i=t[n],a=i._struct.opt,p=(r=this.config.pkgClr,i.type),s=null;if(1==p||9==p?(s=this.flow.endpoint(a.cx,a.cy,a.r,a.text),1==p?s.c.attr("fill",r.start):s.c.attr("fill",r.end)):2==p?(s=this.flow.operation(a.cx,a.cy,a.w,a.h,a.text)).c.attr("fill",r.opera):3==p&&(s=this.flow.judge(a.cx,a.cy,a.w,a.h,a.text)).c.attr("fill",r.judge),s){var c=i.code||s.c.data("code"),h=s.c.id;c||(c=this._getOrderCode()),s.c.data("code",c),this._code2EidDick[c]=h,s.c.data("type",p),this._bindEvent(s),this.nodeQueues.push(s);var u=i.prev||null;u&&o(u,c);var f=i.next||null;f&&o(c,f)}}for(var y in e){var l=y.split("__"),v=this.getNodeByCode(l[0]),x=this.getNodeByCode(l[1]),d=v.getStlnP(),g=x.getEnlnP(),_=this.flow.arrow([d.x,d.y],[g.x,g.y],5);_.position||(_.position={}),_.position.from=d.position,v.recordLine("from",_),x.recordLine("to",_),_.position.to=g.position,_.c.attr("fill",r.arrow),this._lineTragEvent(_),this.lineQueues.push(_)}}return this},t.prototype._createNode=function(t,e){var r=null,o=this.config.pkgClr;switch(e){case 1:(r=this.flow.endpoint(t.dx,t.dy,10,"开始")).c.attr("fill",o.start);break;case 2:(r=this.flow.operation(t.dx,t.dy,50,40,"操作流程")).c.attr("fill",o.opera);break;case 3:(r=this.flow.judge(t.dx,t.dy,50,40,"流程判断")).c.attr("fill",o.judge);break;case 9:(r=this.flow.endpoint(t.dx,t.dy,10,"结束")).c.attr("fill",o.end)}if(r){var n=this._getOrderCode();r.c.data("code",n),this._code2EidDick[n]=r.c.id,r.c.data("type",e),this._bindEvent(r),this.nodeQueues.push(r)}},t.prototype._bindEvent=function(t){if(t){var e=this,r=this.config.pkgClr;!function(){var e={x:0,y:0};t.c.drag(function(r,o){r+=e.x,o+=e.y,t.move(r,o),t.ToSyncArrow(r,o)},function(){var t,r;if("ellipse"==this.type)t=this.attr("cx"),r=this.attr("cy");else if("rect"==this.type)t=this.attr("x"),r=this.attr("y");else if("path"==this.type){var o=this.attr("path")[0];t=o[1],r=o[2]}e.x=t,e.y=r},function(){e={x:0,y:0}})}(),t.c.click(function(){e.removeBBox();var o=this.getBBox();t.bBox=t.instance.rect(o.x-5,o.y-5,o.width+10,o.height+10),t.bBox.attr({stroke:r.NodeBox}),e.onNodeClick(t)})}},t.prototype._lineTragEvent=function(t){if(!t||"object"!=typeof t)return!1;var e=this;return function(t){t.c.click(function(){e.removeBBox(),t.selectEdMk=!0;var r=t.opt,o=e.raphael.circle(r.p1[0],r.p1[1],3);o.attr("fill","#000000");var n=e.raphael.circle(r.p2[0],r.p2[1],3);n.attr("fill","#000000");var i=function(r,o){var n={ax:0,ay:0};r.drag(function(r,i){r+=n.ax,i+=n.ay;var a=e.getIntersectElem({x:r,y:i});if(a){e.removeIntersectMk(),a.c.attr("fill","#FF0000"),a._IntersectMk=!0;var p;r=(p=o?a.getEnlnP():a.getStlnP()).x,i=p.y;var s=o?"to":"from";e.removeConLine(t,s),a.recordLine(s,t),t.position||(t.position={}),t.position[s]=p.position}o?(t.updatePath(null,[r,i]),this.data("type","to")):(t.updatePath([r,i]),this.data("type","from")),e.MagneticCore=this,this.attr({cx:r,cy:i})},function(){n.ax=this.attr("cx"),n.ay=this.attr("cy")},function(){e.MagneticCore=null})};i(o),i(n,!0),e.tempNodes.push(o,n)})}(t),!0},t.prototype._textBindEvent=function(t){var e=this;!function(t){var e={x:0,y:0};t.drag(function(r,o){r+=e.x,o+=e.y,t.attr({x:r,y:o})},function(){e.x=t.attr("x"),e.y=t.attr("y")},function(){})}(t),t.click(function(){e.removeBBox(),this.attr(g.selected),this.data("selectMk",!0)})},t.prototype._removeTxtSelect=function(){for(var t=this.textQueues,e=0;e<t.length;e++){var r=t[e];r.data("selectMk")&&(r.attr(g.defAtrr),r.data("selectMk",!1))}},t.prototype.onNodeClick=function(t){},t.version=i.a,t}();e.default=_},function(t,e,r){"use strict";var o=0,n={},i=function(){function t(){}return t.createInstance=function(t){return(t="object"==typeof t?t:{}).dom,"string"==typeof t.dom&&(t.dom=$(t.dom)),t.w||(t.w=1.1*$(window).width()),t.h||(t.h=1.1*$(window).height()),Raphael(t.dom.get(0),t.w,t.h)},t.onMoveEvt=function(){},t.onStartEvt=function(){},t.onEndEvt=function(){},t.getIndex=function(){return o+=1},t.src=function(t,e,r){n[t]||(n[t]={});var o=n[t];return void 0===e?o:void 0===r?o[e]||null:void(o[e]=r)},t}();e.a=i},function(t,e,r){"use strict";r.d(e,"a",function(){return c});var o=r(6),n=r(7),i=r(8),a=r(9),p=r(10),s=r(11),c=function(){function t(t){this.paper=t}return t.prototype.endpoint=function(t,e,r,n){var i=new o.a(this.paper);return i.create({cx:t,cy:e,r:r,text:n}),i},t.prototype.judge=function(t,e,r,o,n){var a=new i.a(this.paper);return a.create({cx:t,cy:e,w:r,h:o,text:n}),a},t.prototype.operation=function(t,e,r,o,i){var a=new n.a(this.paper);return a.create({cx:t,cy:e,w:r,h:o,text:i}),a},t.prototype.line=function(t,e){var r=new a.a(this.paper);return r.create(t,e),r},t.prototype.rightAngleLine=function(t){var e=new a.a(this.paper);return e.RightAngle(t),e},t.prototype.arrow=function(t,e,r){var o=new p.a(this.paper);return o.create(t,e,r),o},t.prototype.bow=function(t){var e=new s.a(this.paper);return e.create(t),e},t.prototype.getEmptyNode=function(t){var e=null;switch(t){case"endpoint":e=new o.a(this.paper);break;case"judge":e=new i.a(this.paper);break;case"operation":e=new n.a(this.paper);break;case"line":e=new a.a(this.paper);break;case"arrow":e=new p.a(this.paper)}return e},t}()},function(t,e,r){"use strict";var o=r(1),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(e){var r=t.call(this)||this;return r.NodeType="endpnt",r.instance=e,r.opt={},r}return n(e,t),e.prototype.create=function(t){if("object"!=typeof t){var e=arguments;t={cx:e[0],cy:e[1],r:e[2]},e[3]&&(t.text=e[3])}t.h=t.h?t.h:t.r,this.minWidth=2*t.r,this.opt=t,this.c=this.instance.ellipse(t.cx,t.cy,t.r,t.h);var r;r=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=r,this.resizeByText()},e.prototype.resizeByText=function(){if(this.label){var t=this.label.getBBox(),e=Math.ceil(t.width),r=this.c.attr("rx");if(e<this.minWidth&&r<this.minWidth)return;e<this.minWidth?e=this.minWidth:e+=2,this.opt.r=e/2,this.resizeByOpt()}},e.prototype.resizeByOpt=function(){var t=this.opt;this.c.attr({cx:t.cx,cy:t.cy,rx:t.r,ry:t.h})},e.prototype.move=function(t,e){this.c.attr({cx:t,cy:e}),this.label.attr({x:t,y:e}),this.opt.cx=t,this.opt.cy=e},e.prototype.ToSyncLine=function(t,e){var r=this;this.syncLineMove(function(o,n,i){var a,p=i.position;if("from"==n){var s=o.attr("path");a="get"+p.from+"p";var c=r[a](t,e);s[0]=["M",c.x,c.y],o.attr("path",s)}else if("to"==n){var h=o.attr("path");a="get"+p.to+"p";var u=r[a](t,e);h[h.length-1]=["L",u.x,u.y],o.attr("path",h)}})},e.prototype.ToSyncArrow=function(t,e){var r=this;this.syncLineMove(function(o,n,i){var a,p=i.position;if("from"==n){a="get"+p.from+"p";var s=r[a](t,e);i.updatePath([s.x,s.y])}else if("to"==n){a="get"+p.to+"p";var c=r[a](t,e);i.updatePath(null,[c.x,c.y])}})},e.prototype.getStlnP=function(t){var e=this["get"+(t=t||"D")+"p"]();return e.position=t,e},e.prototype.getEnlnP=function(t){var e=this["get"+(t=t||"B")+"p"]();return e.position=t,e},e.prototype.getAp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t-=r.r,{x:t,y:e}},e.prototype.getBp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,e-=r.r,{x:t,y:e}},e.prototype.getCp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t+=r.r,{x:t,y:e}},e.prototype.getDp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,e+=r.r,{x:t,y:e}},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(1),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(e){var r=t.call(this)||this;return r.NodeType="opera",r.instance=e,r.opt={},r.bBox=null,r}return n(e,t),e.prototype.create=function(t){this.opt=t,this.minWidth=t.w;var e=this.getAp();this.c=this.instance.rect(e.x,e.y,t.w,t.h);var r;r=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=r,this.resizeByText()},e.prototype.resizeByText=function(){if(this.label){var t=this.label.getBBox(),e=Math.ceil(t.width),r=this.c.attr("w");if(e<this.minWidth&&r<this.minWidth)return;e<this.minWidth?e=this.minWidth:e+=10,this.opt.w=e;var o=this.getAp();this.c.attr({width:e,x:o.x,y:o.y})}},e.prototype.move=function(t,e){var r=this.getCtpByAp(t,e);this.c.attr({x:t,y:e}),this.label.attr(r),this.opt.cx=t,this.opt.cy=e},e.prototype.ToSyncLine=function(t,e){var r=this,o=this.getCtpByAp(t,e);this.syncLineMove(function(t,e,n){var i,a=n.position;if("from"==e){var p=t.attr("path");i="get"+a.from+"p";var s=r[i](o.x,o.y);p[0]=["M",s.x,s.y],t.attr("path",p)}else if("to"==e){i="get"+a.to+"p";var c=r[i](o.x,o.y),h=t.attr("path");h[h.length-1]=["L",c.x,c.y],t.attr("path",h)}})},e.prototype.ToSyncArrow=function(t,e){var r=this,o=this.getCtpByAp(t,e);this.syncLineMove(function(t,e,n){var i,a=n.position;if("from"==e){i="get"+a.from+"p";var p=r[i](o.x,o.y);n.updatePath([p.x,p.y])}else if("to"==e){i="get"+a.to+"p";var s=r[i](o.x,o.y);n.updatePath(null,[s.x,s.y])}})},e.prototype.getStlnP=function(t){var e=this["get"+(t=t||"Bt")+"p"]();return e.position=t,e},e.prototype.getEnlnP=function(t){var e=this["get"+(t=t||"T")+"p"]();return e.position=t,e},e.prototype.getCtpByAp=function(t,e){var r=this.opt;return t+=r.w/2,e+=r.h/2,{x:t,y:e}},e.prototype.getAp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t-=r.w/2,e-=r.h/2,{x:t,y:e}},e.prototype.getBp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t-=r.w/2,e+=r.h/2,{x:t,y:e}},e.prototype.getCp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t+=r.w/2,e+=r.h/2,{x:t,y:e}},e.prototype.getDp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t-=r.w/2,e+=r.h/2,{x:t,y:e}},e.prototype.getTp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,e-=r.h/2,{x:t,y:e}},e.prototype.getRp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t+=r.w/2,{x:t,y:e}},e.prototype.getBtp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,e+=r.h/2,{x:t,y:e}},e.prototype.getLp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t-=r.w/2,{x:t,y:e}},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(1),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(e){var r=t.call(this)||this;return r.NodeType="judge",r.instance=e,r.opt={},r}return n(e,t),e.prototype.onlyCell=function(t,e,r,o){this.opt={cx:t,cy:e,w:r,h:o};var n=this.getAp(),i=this.getBp(),a=this.getCp(),p=this.getDp();return this.instance.path("M"+n.x+","+n.y+"L"+i.x+","+i.y+"L"+a.x+","+a.y+"L"+p.x+","+p.y+"Z")},e.prototype.create=function(t){this.opt=t,this.minWidth=t.w;var e=this.getAp(),r=this.getBp(),o=this.getCp(),n=this.getDp();this.c=this.instance.path("M"+e.x+","+e.y+"L"+r.x+","+r.y+"L"+o.x+","+o.y+"L"+n.x+","+n.y+"Z");var i;i=t.text?this.instance.text(t.cx,t.cy,t.text):this.instance.text(t.cx,t.cy),this.label=i,this.resizeByText()},e.prototype.resizeByText=function(){if(this.label){var t=this.label.getBBox(),e=Math.ceil(t.width),r=this.c.attr("w");if(e<this.minWidth&&r<this.minWidth)return;e<this.minWidth?e=this.minWidth:e+=25,this.opt.w=e,this.resizeByOpt()}},e.prototype.resizeByOpt=function(){var t=this.getAp(),e=this.getBp(),r=this.getCp(),o=this.getDp();this.c.attr("path",[["M",t.x,t.y],["L",e.x,e.y],["L",r.x,r.y],["L",o.x,o.y],["Z"]])},e.prototype.move=function(t,e){var r=this.getCpByAp(t,e),o=this.getBp(r.x,r.y),n=this.getCp(r.x,r.y),i=this.getDp(r.x,r.y);this.c.attr("path",[["M",t,e],["L",o.x,o.y],["L",n.x,n.y],["L",i.x,i.y],["Z"]]),this.opt.cx=r.x,this.opt.cy=r.y,this.label.attr(r)},e.prototype.ToSyncLine=function(t,e){var r=this,o=this.getCpByAp(t,e);this.syncLineMove(function(t,e,n){var i,a=n.position;if("from"==e){i="get"+a.from+"p";var p=r[i](o.x,o.y),s=t.attr("path");s[0]=["M",p.x,p.y],t.attr("path",s)}else if("to"==e){i="get"+a.to+"p";var c=r[i](o.x,o.y),h=t.attr("path");h[h.length-1]=["L",c.x,c.y],t.attr("path",h)}})},e.prototype.ToSyncArrow=function(t,e){var r=this,o=this.getCpByAp(t,e);this.syncLineMove(function(t,e,n){var i,a=n.position;if("from"==e){i="get"+a.from+"p";var p=r[i](o.x,o.y);n.updatePath([p.x,p.y])}else if("to"==e){i="get"+a.to+"p";var s=r[i](o.x,o.y);n.updatePath(null,[s.x,s.y])}})},e.prototype.getStlnP=function(t){var e=this["get"+(t=t||"D")+"p"]();this.isCoincidence(e,"from")&&(e=this.getCp(),t="C");return{x:e.x,y:e.y,position:t}},e.prototype.getEnlnP=function(t){var e=this["get"+(t=t||"B")+"p"]();return e.position=t,e},e.prototype.getCpByAp=function(t,e){return t+=this.opt.w/2,{x:t,y:e}},e.prototype.getAp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t-=r.w/2,{x:t,y:e}},e.prototype.getBp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,e-=r.h/2,{x:t,y:e}},e.prototype.getCp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,t+=r.w/2,{x:t,y:e}},e.prototype.getDp=function(t,e){var r=this.opt;return t=t||r.cx,e=e||r.cy,e+=r.h/2,{x:t,y:e}},e.prototype.isCoincidence=function(t,e){var r=!1;if(t&&"object"==typeof t&&void 0!==t.x&&void 0!==t.y)if("from"==e){if(this.fromLine.length>0)for(var o=0;o<this.fromLine.length;o++){if((a=(i=this.fromLine[o].c.attr("path"))[0])[1]==t.x&&a[2]==t.y){r=!0;break}}}else if("to"==e&&this.toLine.length>0)for(var n=0;n<this.toLine.length;n++){var i,a;if((a=(i=this.toLine[n].c.attr("path"))[i.length-1])[1]==t.x&&a[2]==t.y){r=!0;break}}return r},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(2),n=function(){function t(t){this.NodeType="line",this.instance=t,this.opt={},this.position={},this.rightAngle=!1}return t.prototype.create=function(t,e){this.opt={p1:t,p2:e},this.c=this.instance.path("M"+t[0]+","+t[1]+"L"+e[0]+","+e[1])},t.prototype.RightAngle=function(t){this.opt=t,this.rightAngle=!0;var e=t.p1,r=t.p2,o=20;t.d&&(o=t.d);var n="";if(e.x!=r.x&&e.y!=r.y){var i=r.x-e.x;n="L"+(e.x+i+o*(i>0?1:-1))+","+e.y+"L"+(e.x+i+o*(i>0?1:-1))+","+r.y}this.c=this.instance.path("M"+e.x+","+e.y+n+"L"+r.x+","+r.y)},t.prototype.createByPoint=function(t){this.opt=t;var e="";o.a.each(this.opt.points,function(t,r){r&&(e+=(e?"L":"M")+r.x+","+r.y)}),this.c=this.instance.path(e)},t}();e.a=n},function(t,e,r){"use strict";var o=function(){function t(t){this.NodeType="arrow",this.instance=t,this.opt={},this.position={}}return t.prototype.create=function(t,e,r){this.opt={p1:t,p2:e,r:r};var o=this.getPoints();this.c=this.instance.path("M"+t[0]+","+t[1]+"L"+e[0]+","+e[1]+"L"+o.cP.x+","+o.cP.y+"L"+o.dP.x+","+o.dP.y+"L"+e[0]+","+e[1])},t.prototype.getPoints=function(t,e,r){var o=this.opt;t||(t=o.p1),e||(e=o.p2),r||(r=o.r);var n=Math.atan2(t[1]-e[1],e[0]-t[0])*(180/Math.PI),i=e[0]-r*Math.cos(n*(Math.PI/180)),a=e[1]+r*Math.sin(n*(Math.PI/180));return{cP:{x:i+r*Math.cos((n+120)*(Math.PI/180)),y:a-r*Math.sin((n+120)*(Math.PI/180))},dP:{x:i+r*Math.cos((n+240)*(Math.PI/180)),y:a-r*Math.sin((n+240)*(Math.PI/180))}}},t.prototype.updatePath=function(t,e,r){var o=this.opt;t||(t=o.p1),e||(e=o.p2),r||(r=o.r);var n=this.getPoints(t,e,r);this.c.attr("path",[["M",t[0],t[1]],["L",e[0],e[1]],["L",n.cP.x,n.cP.y],["L",n.dP.x,n.dP.y],["L",e[0],e[1]]]),this.opt={p1:t,p2:e,r:r}},t}();e.a=o},function(t,e,r){"use strict";var o=function(){function t(t){this.NodeType="bow",this.instance=t,this.opt={},this.position={}}return t.prototype.create=function(t){this.opt=t,this.queueCheck(),this.bodySharp(),this.arrowSharp()},t.prototype.arrowSharp=function(){var t=this.opt,e=t.queue,r=t.r?t.r:5,o=e.length,n=e[o-1],i=e[o-2],a=Math.atan2(i.y-n.y,n.x-i.x)*(180/Math.PI),p=n.x-r*Math.cos(a*(Math.PI/180)),s=n.y+r*Math.sin(a*(Math.PI/180)),c=p+r*Math.cos((a+120)*(Math.PI/180)),h=s-r*Math.sin((a+120)*(Math.PI/180)),u=p+r*Math.cos((a+240)*(Math.PI/180)),f=s-r*Math.sin((a+240)*(Math.PI/180));this.arrow?this.arrow.attr("path",[["M",n.x,n.y],["L",c,h],["L",u,f],["L",n.x,n.y]]):this.arrow=this.instance.path("M"+n.x+","+n.y+"L"+c+","+h+"L"+u+","+f+"L"+n.x+","+n.y)},t.prototype.bodySharp=function(){var t=this.opt.queue,e="",r=[],o=!1,n=!0;o=!!this.c;for(var i=0;i<t.length;i++){var a=t[i];o?(n&&r.length>0&&(n=!1),r.push([n?"M":"L",a.x,a.y])):e+=(e?"L":"M")+","+a.x+","+a.y}o?this.c.attr("path",r):this.c=this.instance.path(e)},t.prototype.queueCheck=function(){var t=this.opt.queue;if(2==t.length){var e=[],r=t[0],o=t[1];r.x<o.x?e.push({x:o.x,y:r.y}):r.x>o.x&&(e.push({x:r.x,y:o.y-20}),e.push({x:o.x,y:o.y-20})),this.opt.queue=[r].concat(e,o)}},t.prototype.updatePath=function(t,e,r){var o=this.opt;if(t&&(o.queue[0]={x:t[0],y:t[1]}),e){var n=o.queue.length-1;o.queue[n]={x:e[0],y:e[1]}}this.queueCheck(),this.bodySharp(),this.arrowSharp()},t}();e.a=o},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var o={version:"2.0.5",release:"20180328",author:"Joshua Conero"}},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="begin"},e.prototype._whenCreatorEvt=function(){var t=this.opt,e=t.bkg||"#851E07";this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",e)},e.prototype.updAttr=function(t){var e=this._updAttr(t).opt;return this.c.attr({cx:e.cx,cy:e.cy,rx:e.w/2,ry:e.h/2}),this},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="task"},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.rect(t.x,t.y,t.w,t.h),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt;return{x:e.cx-e.w/2,y:e.cy-e.h/2,w:e.w,h:e.h}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),r={x:e.x,y:e.y,width:e.w,height:e.h};this.c.attr(r)},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}},function(t,e){return{x:t,y:e}},function(){return{}}),this},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="audit",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx,o=e.cy,n=e.w,i=e.h,a=this.xRate;return[{x:r-n/2,y:o-i/2},{x:r+n/2+n*a,y:o-i/2},{x:r+n/2,y:o+i/2},{x:r-n/2-n*a,y:o+i/2}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();this.c.attr("path",this._ps2PathAttr(e,!0))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="sign",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx,o=e.cy,n=e.w,i=e.h,a=this.xRate;return[{x:r-n/2-n*a,y:o-i/2},{x:r+n/2+n*a,y:o-i/2},{x:r+n/2,y:o+i/2},{x:r-n/2,y:o+i/2}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();this.c.attr("path",this._ps2PathAttr(e,!0))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="cond"},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t,!0)),this.c.attr("fill",e)},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx,o=e.cy,n=e.w,i=e.h;return[{x:r,y:o-i/2},{x:r+n/2,y:o},{x:r,y:o+i/2},{x:r-n/2,y:o}]},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr();this.c.attr("path",this._ps2PathAttr(e,!0))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="sub_flow",this.xRate=.15},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=t.cAttr,r=t.lLine,o=t.rLine,n=this.opt.bkg||"#88EEEA";this.c=this.paper.rect(e.x,e.y,e.w,e.h),this.c.attr("fill",n),this.inlineEle=[this.paper.path(this._ps2Path(r)),this.paper.path(this._ps2Path(o))]},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx-e.w/2,o=e.cy-e.h/2,n=e.w,i=e.h,a=this.xRate;return{cAttr:{x:r,y:o,w:n,h:i},lLine:[{x:r+n*a,y:o},{x:r+n*a,y:o+i}],rLine:[{x:r+n-n*a,y:o},{x:r+n-n*a,y:o+i}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),r=e.cAttr,o=e.lLine,n=e.rLine;this.c.attr({x:r.x,y:r.y,width:r.w,height:r.h}),this.inlineEle[0].attr("path",this._ps2PathAttr(o)),this.inlineEle[1].attr("path",this._ps2PathAttr(n))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="parallel",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlineEle=this.paper.path(this._ps2Path(t.inLine))},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx-e.w/2,o=e.cy-e.h/2,n=e.w,i=e.h,a=n*(1-2*this.xRate);return{cAttr:[{x:r-a/2,y:o-i/2},{x:r+a/2,y:o-i/2},{x:r+n/2,y:o},{x:r+a/2,y:o+i/2},{x:r-a/2,y:o+i/2},{x:r-n/2,y:o}],inLine:[{x:r-a/2-.1*a,y:o},{x:r+a/2+.1*a,y:o}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),r=e.cAttr,o=e.inLine;this.c.attr("path",this._ps2PathAttr(r,!0)),this.inlineEle.attr("path",this._ps2PathAttr(o))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="merge",this.xRate=.2},e.prototype._whenCreatorEvt=function(){var t=this.opt2Attr(),e=this.opt.bkg||"#88EEEA";this.c=this.paper.path(this._ps2Path(t.cAttr,!0)),this.c.attr("fill",e),this.inlinesEle=[this.paper.path(this._ps2Path(t.vLine)),this.paper.path(this._ps2Path(t.hLine))]},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.cx-e.w/2,o=e.cy-e.h/2,n=e.w,i=e.h,a=n*(1-2*this.xRate);return{cAttr:[{x:r-a/2,y:o-i/2},{x:r+a/2,y:o-i/2},{x:r+n/2,y:o},{x:r+a/2,y:o+i/2},{x:r-a/2,y:o+i/2},{x:r-n/2,y:o}],vLine:[{x:r,y:o-i/2*.8},{x:r,y:o+i/2*.8}],hLine:[{x:r-a/2-.1*a,y:o},{x:r+a/2+.1*a,y:o}]}},e.prototype.updAttr=function(t){this._updAttr(t);var e=this.opt2Attr(),r=e.cAttr,o=e.vLine,n=e.hLine;this.c.attr("path",this._ps2PathAttr(r,!0)),this.inlinesEle[0].attr("path",this._ps2PathAttr(o)),this.inlinesEle[1].attr("path",this._ps2PathAttr(n))},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="end"},e.prototype._whenCreatorEvt=function(){var t=this.opt,e=t.bkg||"#2EF25F";this.c=this.paper.ellipse(t.cx,t.cy,t.w/2,t.h/2),this.c.attr("fill",e)},e.prototype.updAttr=function(t){var e=this._updAttr(t).opt;this.c.attr({cx:e.cx,cy:e.cy,rx:e.w/2,ry:e.h/2})},e.prototype.moveable=function(){var t=this;return this.c.undrag(),this.c.drag(function(e,r,o,n){return t.updAttr({cx:o,cy:n}),{}}),t},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="ln"},e.prototype._whenCreatorEvt=function(){var t=this.opt.bkg||"rgb(3, 84, 41)";this.c=this.paper.path(this._ps2Path(this.opt2Attr())),this.c.attr("fill",t)},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.P1,o=e.P2,n=e.r||.2*this.getLen(),i=Math.atan2(r.y-o.y,o.x-r.x)*(180/Math.PI),a=o.x-n*Math.cos(i*(Math.PI/180)),p=o.y+n*Math.sin(i*(Math.PI/180));return[r,o,{x:a+n*Math.cos((i+120)*(Math.PI/180)),y:p-n*Math.sin((i+120)*(Math.PI/180))},{x:a+n*Math.cos((i+240)*(Math.PI/180)),y:p-n*Math.sin((i+240)*(Math.PI/180))},o]},e.prototype.getLen=function(t){var e=t||this.opt,r=e.P1,o=e.P2;return this.getPLen(r,o)},e}(o.a);e.a=i},function(t,e,r){"use strict";var o=r(0),n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._onInit=function(){this.NodeType="ln_poly"},e.prototype._whenCreatorEvt=function(){this.c=this.paper.path(this._ps2Path(this.opt2Attr()))},e.prototype.opt2Attr=function(t){var e=t||this.opt,r=e.P1,o=e.P2,n=e.h||4,i=e.rX||.35,a=this.getLen(),p=e.r||a*(1-i)*.2,s={x:r.x+a*i,y:r.y+n},c=Math.atan2(s.y-o.y,o.x-s.x)*(180/Math.PI),h=o.x-p*Math.cos(c*(Math.PI/180)),u=o.y+p*Math.sin(c*(Math.PI/180)),f=h+p*Math.cos((c+120)*(Math.PI/180)),y=u-p*Math.sin((c+120)*(Math.PI/180)),l=h+p*Math.cos((c+240)*(Math.PI/180)),v=u-p*Math.sin((c+240)*(Math.PI/180));return[r,{x:r.x+a*i,y:r.y},s,s,o,{x:f,y:y},{x:l,y:v},o]},e.prototype.getLen=function(t){var e=t||this.opt,r=e.P1,o=e.P2;return this.getPLen(r,o)},e}(o.a);e.a=i}]);