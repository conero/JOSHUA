{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/browser/storage/adapter.ts","webpack:///./src/browser/storage/store.ts","webpack:///./src/data/uType.ts"],"names":[],"mappings":"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","file":"store.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/browser/storage/store.ts\");\n","/**\r\n * 2018年7月26日 星期四\r\n * 适配器\r\n */\r\n\r\nexport default class Adapter{\r\n    engine: string;\r\n    storage: Storage;\r\n    constructor(engine?: string){\r\n        this.engine = engine || 'session';\r\n        this.engine = this.engine.toLowerCase();\r\n        // 获取引擎\r\n        switch(engine){\r\n            case 'session':\r\n                this.storage = window.sessionStorage;\r\n                break;\r\n            case 'local':\r\n                this.storage = window.localStorage;\r\n                break;\r\n        }\r\n        \r\n    }\r\n    /**\r\n     * 参数获取\r\n     * @param {string} key\r\n     * @returns {string | null}\r\n     */\r\n    get(key: string): string|null{\r\n        return this.storage.getItem(key)\r\n    }\r\n\r\n    /**\r\n     * 设置值\r\n     * @param {string} key\r\n     * @param {*} value\r\n     * @return Ja.storeAdapter\r\n     */\r\n    set(key: string, value: any): Ja.storeAdapter{\r\n        if('object' == typeof value){\r\n            value = JSON.stringify(value)\r\n        }\r\n        this.storage.setItem(key, value);\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * 删除值\r\n     * @param {string} key\r\n     * @returns {Ja.storeAdapter}\r\n     */\r\n    del(key: string): Ja.storeAdapter{\r\n        this.storage.removeItem(key);\r\n        return this\r\n    }\r\n}","/**\r\n * 2018年7月26日 星期四\r\n * 浏览器存储系统\r\n */\r\n///<reference path=\"../../index.d.ts\"/>\r\nimport Adapter from \"./adapter\";\r\nimport uType from \"../../data/uType\";\r\n\r\nexport default class store{\r\n    engine: string;  // 项目类型, session/local\r\n    bKey?: string;    // 区块主键\r\n    options: Ja.storeOptions;\r\n    adapter: Ja.storeAdapter;\r\n    data: Sr.map;\r\n    constructor(options?: Ja.storeOptions){\r\n        this.options = options || {};\r\n        this.engine = this.options.engin || 'session';\r\n        this.adapter = new Adapter(this.engine);\r\n\r\n        if(this.options.bKey){\r\n            this.bKey = this.options.bKey\r\n        }        \r\n\r\n        this._init()\r\n    }\r\n    /**\r\n     * 项目初始化\r\n     */\r\n    private _init(){\r\n        this.data = {};\r\n        if(this.bKey){\r\n            let sedt = this.raw(this.bKey);\r\n            if(sedt){\r\n                try {\r\n                    this.data = JSON.parse(sedt)\r\n                } catch (error) {\r\n                    this.data = {}\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @param {string} key\r\n     * @returns {string|null} \r\n     */\r\n    raw(key: string): string|null{\r\n        return this.adapter.get(key)\r\n    }\r\n    /**\r\n     * 设置原始值\r\n     * @param {string} key\r\n     * @param value\r\n     * @returns {Ja.store}\r\n     */\r\n    setRaw(key: string, value?: any): Ja.store{\r\n        this.adapter.set(key, value);\r\n        return this\r\n    }\r\n    /**\r\n     * 删除所有数据\r\n     */\r\n    clearAll(){\r\n        let {bKey} = this;\r\n        if(bKey){\r\n           this.adapter.del(bKey);\r\n            this.data = {}\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 数据更新\r\n     * @returns {Ja.store}\r\n     */\r\n    update(): Ja.store{\r\n        let {bKey, data} = this;\r\n        if(bKey){\r\n            this.adapter.set(bKey, data);\r\n        }\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * 值设置\r\n     * @param {string} key\r\n     * @param value\r\n     * @returns {Ja.store}\r\n     */\r\n    set(key: string, value: any): Ja.store{\r\n        let {data} = this;\r\n        this.data = uType.isObject(data)? data : {};\r\n        this.data[key] = value;\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * 删除数据\r\n     * @param {string} key\r\n     * @returns {Ja.store}\r\n     */\r\n    del(key: string): Ja.store{\r\n        delete this.data[key];\r\n        return this\r\n    }\r\n\r\n    /**\r\n     * 获取配置数据\r\n     * @param {string} key\r\n     * @param def\r\n     * @returns {*}\r\n     */\r\n    get(key: string, def?: any): any{\r\n        return this.data[key] || def\r\n    }\r\n}\r\n","/**\r\n * 2018年7月26日 星期四\r\n * 数据类型判断\r\n */\r\n\r\nexport default {\r\n    /**\r\n     * 空对象\r\n     * @param {*} obj \r\n     */\r\n    noEmptyObj(obj: any): boolean{\r\n        let noEmp = false;\r\n        if(this.isObject(obj)){\r\n            for(let k in obj){\r\n                noEmp = true;\r\n                break\r\n            }\r\n        }      \r\n        return noEmp\r\n    },\r\n    /**\r\n     * 否是为object类型，不包括 array\r\n     * @param value \r\n     */\r\n    isObject(value: any): boolean{\r\n        if('object' == typeof value){\r\n            return !(value instanceof Array)\r\n        }\r\n        return false\r\n    },\r\n    /**\r\n     * 是否为数组\r\n     * @param value \r\n     */\r\n    isArray(value: any): boolean{\r\n        if(this.isObject(value)){\r\n            return value instanceof Array\r\n        }\r\n        return false\r\n    }\r\n} "],"sourceRoot":""}